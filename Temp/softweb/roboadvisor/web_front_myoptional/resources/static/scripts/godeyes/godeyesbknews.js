define(["jquery","cors","layer","utils","handlebars","autocomplete","nicescroll","jqqqface"],function(e,t,i,n,r,o,s,a){i.config({path:window.gConfig.staticPath+"static/libs/layer/"}),$.support.cors=!0;var c={curPageOpts:{currpage:0,pageSize:10,isFinished:!(window.SetMyZXGChanged=function(e){var t="";try{t=function i(e,t){try{return function i(){return window.external.EmObj}().EmFunc(e,t)}catch(n){}}("EM_FUNC_GET_MY_ZXG",e)}catch(n){}""!==t&&t!==undefined&&setTimeout(function(){t=t.replace(/\[/g,"").replace(/]/g,""),c.StockList=t,c.relationsInfoList(e),c.resetPageData()},300)})},StockList:"",EMSSOSTR:"",init:function(){var e=this;$.cookie("expertnews.uid")?e.getUID=$.cookie("expertnews.uid"):(e.getUID=n.GetQueryString("uid")||1,$.cookie("expertnews.uid",e.getUID)),e.BlockCode=n.GetQueryString("BlockCode"),e.EMSSOSTR=n.EMSSO(),e.getUID=$.cookie("expertnews.uid")||n.GetQueryString("uid")||1,e.getAppId=1015004,e.handerbarsFormat(),e.scrollContent(),e.godeyesInfoList(""),e.EM_HREF_JUMP(),e.jumpToStockHQ()},jumpToStockHQ:function(){var t=this;$(document).on("click","[data-stockCode]",function(){var e=t.preStockcode($(this).attr("data-stockCode"));n.goThisStock(e)})},handerbarsFormat:function(){r.registerHelper("renderTime",function(e){var t=new Date,i=t.getMonth()+1,n=i<=9?"0"+i:i,o=t.getFullYear()+"-"+n+"-"+t.getDate();return e=e==undefined||null==e||0==e.length?"":e.slice(0,10)==o?e.slice(11,16):e.slice(5,10)+" "+e.slice(11,16),new r.SafeString(e)}),r.registerHelper("renderTimed",function(e){var t=new Date,i=t.getMonth()+1,n=i<=9?"0"+i:i,o=t.getFullYear()+"-"+n+"-"+t.getDate();return e=e==undefined||null==e||0==e.length?"":e.slice(0,10)==o?e.slice(11,16):e.slice(5,7)+"/"+e.slice(8,10),new r.SafeString(e)})},scrollContent:function(){var e=this;e.srcollBar=function(){$(".list").css("height",$(window).height()-$(".title:eq(0)").outerHeight()-1),$.each([".list"],function(e,t){0<$(t).length&&$(t).niceScroll({cursorcolor:"#666",cursoropacitymax:.5,touchbehavior:!1,cursorwidth:"6px",cursorborder:"0",cursorborderradius:"8px",autohidemode:!0})})},e.srcollBar(),$(window).on("resize",function(){e.srcollBar()})},godeyesInfoList:function(e){$("#newsList").addClass("no-info-list").html('<div class="no-info">板块资讯加载中……</div>');var n=["{{#each Message}}",'<li class="news-item"><a class="news-item-link" href="#" data-ahref="'+pagerouter.articleZixun+'?newsid={{matchid DataUrl}}&source=cloud" data-title="{{ArticleTitle}}"><i class="icon-1">&#xe637;</i>{{ArticleTitle}}</a><span class="time">{{renderTimed PublishTime}}</span></li>',"{{/each}}"].join("");r.registerHelper("matchid",function(e){var t=/\/(\d*?)\.data$/gm.exec(""+e)[1];return new r.SafeString(t)}),$.ajax({url:window.gConfig.apiHost+"blocknews/getblocknews",type:"POST",timeout:5e3,dataType:"JSON",data:{BlockCode:this.BlockCode,PageSize:30},success:function(e){if(0==e.RetCode&&e.Message&&0<e.Message.length){var t=$("#newsList"),i=r.compile(n)(e);t.removeClass("no-info-list").html(i)}else 0==e.RetCode&&0==e.Message.length&&$("#newsList").addClass("no-info-list").html('<div class="no-info">请添加自选股，追踪您的个股动态</div>')},error:function(e,t,i){}})},EM_PC_JSBRIDGE:function(e,t){!function i(e,t){try{return function i(){return window.external.EmObj}().EmFunc(e,t)}catch(n){}}(e,t)},EM_HREF_JUMP:function(){var s=this;$("#newsList").on("dblclick",".news-item",function(){var e=$(this);if(e.addClass("actived"),!e.hasClass("disabled")){e.addClass("disabled");var t=e.find(".news-item-link"),i=t.attr("data-ahref"),n=t.attr("data-title"),o=i+"&";try{s.EM_PC_JSBRIDGE("EM_FUNC_GOODS_NEWSINFO","{|*"+n+"*|}{|*"+o+"*|}")}catch(r){}e.removeClass("disabled")}})}};c.init()});