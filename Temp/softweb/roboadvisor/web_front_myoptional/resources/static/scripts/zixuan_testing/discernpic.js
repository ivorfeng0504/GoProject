require.config({waitSeconds:0}),define(["jQuery","cors","utils","handlebars","jqueryform","json2"],function(t,n,o,s,e,i,a){$.support.cors=!0,{config:{stocktpl:function(){return $("#stocktpl")},stockList:function(){return $("#stockList")}},init:function(){this.loadingfn(),this.bindEvent()},bindEvent:function(){var i=this;$("#StockImage").on("change",function(t){$("#mask").find(".noneinline").remove(),$("#formImg").submit()}),$("#formImg").ajaxForm({success:function(t){var n={};try{n=JSON.parse(t)}catch(e){"object"==typeof t&&(n=t)}if(0==n.RetCode&&n.Message&&n.Message.length){var o=n.Message;$("#spanNum").html("("+o.length+")"),$("#stockNum").html(o.length),$("#btnImport").removeClass("disabled"),$("#StockImage").val(""),$(".mask").remove(),i.handlerbarCompile(i.config.stocktpl(),i.config.stockList(),o),$(".step4").show().siblings().hide()}else $("#mask").find(".noneinline").remove(),$("#StockImage").val(""),$("#mask").prepend('<div class="noneinline">未识别股票，请换更清晰图片</div>')},error:function(t){$("#StockImage").val(""),console.log(t)}}),$("#btnImport").on("click",function(){var t=[];$("#stockList .active .checkbox").each(function(){t.push(i.preStockcode($(this).attr("data-val")))}),t.length?(t.reverse(),i.importStockLst("["+t.join(",")+"]"),i.closeWin()):$("#btnImport").addClass("disabled")}),$("#stockList").on("click","li",function(){$(this).toggleClass("active");var t=$("#stockList .active .checkbox").length;$("#spanNum").html("("+t+")"),$("#stockNum").html(t),t?$("#btnImport").removeClass("disabled"):$("#btnImport").addClass("disabled")})},preStockcode:function(t){return"6"==t.substr(0,1)?"0"+t:"1"+t},importStockLst:function(t){try{PC_JH("EM_FUNC_ADD_ZXG",t)}catch(n){}},closeWin:function(){try{PC_JH("EM_FUNC_CLOSE","")}catch(t){}},loadingfn:function(){$(document).ajaxStart(function(){$(".btn").addClass("disabled").prop("disabled",!0),$("#loading").show()}).ajaxStop(function(){$(".btn").removeClass("disabled").prop("disabled",!1),$("#loading").hide()}).ajaxError(function(t,n,o){}).ajaxComplete(function(t,n,o){$(".btn").removeClass("disabled").prop("disabled",!1),$("#loading").hide()})},handlerbarCompile:function(t,n,o){var e=t.html(),i=s.compile(e)(o);n.empty().append(i)}}.init(),$.EMoneyAnalytics().Init(myoptTjAppid,"discernpic","")});