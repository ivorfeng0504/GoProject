define(["jquery"],function($){$.support.cors=!0,Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),Array.prototype.remove=function(e){var t=this.indexOf(e);-1<t&&this.splice(t,1)};var _toQueryPair=function(e,t){return void 0===t?e:e+"="+encodeURIComponent(null===t?"":String(t))};$.callEvent=function(e,t,n,r,a){var i,o=$.Event(e);return r&&($(r).trigger(o,a),i=o.result),$.isFunction(t)&&(i=t.apply(n,$.isArray(a)?a:[a])),i},$.fn.callEvent=function(e,t,n){return $.callEvent(t,e.options?e.options[t]:null,e,this,n)},$.bindFn=function(e,i,o){var t=$.fn[e],c=i.NAME||"feui."+e;$.fn[e]=function(r,a){return this.each(function(){var e=$(this),t=e.data(c),n="object"==typeof r&&r;o&&(n=$.extend(n,o)),t||e.data(c,t=new i(e,n)),"string"==typeof r&&t[r].apply(t,$.isArray(a)?a:[a])})},$.fn[e].Constructor=i,$.fn[e].noConflict=function(){return $.fn[e]=t,this}},$.formatDate=function(e,t){e instanceof Date||(e=e.replace("T"," "),e=new Date(e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};for(var r in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},$.format=function(e,t){if(e instanceof Date)return $.formatDate(e,t);var n;if(1<arguments.length)if(2==arguments.length&&"object"==typeof t)for(var r in t)t[r]!==undefined&&(n=new RegExp("({"+r+"})","g"),e=e.replace(n,t[r]));else for(var a=1;a<arguments.length;a++)arguments[a]!==undefined&&(n=new RegExp("({["+(a-1)+"]})","g"),e=e.replace(n,arguments[a]));return e},$.calValue=function(e,t,n){return $.isFunction(e)?e.apply(t,$.isArray(n)?n:[n]):e},$.is$=function(e){return window.jQuery===$?e instanceof jQuery:$.zepto.isZ(e)},$.isStr=function(e){return"string"==typeof e},$.isNum=function(e){return"number"==typeof e},$.setFontSize=function(e,t){var n=2,r=16,a=$("[data-fontsizecnt]")[0];e<0&&(n=-2),r=32<(r=(r=parseInt((""==a.style.fontSize?r+"":a.style.fontSize).replace("px",""))+n)<12?12:r)?32:r,a.style.lineHeight=1.7*r+"px",a.style.fontSize=r+"px"},$.TapName="ontouchstart"in document.documentElement?"touchstart":"click",$.uuid||($.uuid=(Math.random()+"").slice(-10)),$.getUUID=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")};var clickData={};return $.EMoneyAnalytics=function(){function u(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}return{Init:function e(e,t,n){clickData.App=e,clickData.Module=t;var r=$.cookie("expertnews.uid")||u("uid")||0,a=$.cookie("expertnews.cid")||u("cid")||0,i=$.cookie("expertnews.pid")||u("pid")||0;if(!r){var o=$.cookie("expertnews.ssourl");r=o.match(/uid=([\d]+)/)?o.match(/uid=([\d]+)/)[1]:"",a=o.match(/cid=([\d]+)/)?o.match(/cid=([\d]+)/)[1]:"",i=o.match(/pid=([\d]+)/)?o.match(/pid=([\d]+)/)[1]:""}clickData.Remark=r+"|"+a+"|"+i;var c=$.cookie("tongji_globalid")||"";clickData._tjglobalid=c,$(document).on("click","[clickkey]",function(e){var t=$(this);clickData._clickkey=t.attr("clickkey"),clickData._clickdata=t.attr("clickdata"),clickData._clickremark=t.attr("clickremark"),clickData._htmltype="";var n=t.attr("data-senddate"),r=(new Date).getTime();(3e3<r-n||!n)&&(t.attr("data-senddate",r),function a(){var e=window.top.location.href;if(""!=clickData.App&&""!=clickData._clickdata){var t="http://aliapi.tongji.emoney.cn/Page/PageClick?v="+Math.random()+"&tongji_globalid="+clickData._tjglobalid+"&app="+clickData.App+"&module="+clickData.Module+"&clickkey="+clickData._clickkey+"&clickdata="+clickData._clickdata+"&clickremark="+clickData._clickremark+"&htmltype="+clickData._htmltype+"&pageurl="+encodeURIComponent(e)+"&remark="+clickData.Remark,n=document.createElement("script");n.src=t,n.type="text/javascript",n.async=!0,n.style.display="none",document.body.appendChild(n)}}())})}}},function(h){var a=/\+/g;function g(e){return k.raw?e:encodeURIComponent(e)}function m(e,t){var n=k.raw?e:function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(a," ")),k.json?JSON.parse(e):e}catch(t){}}(e);return h.isFunction(t)?t(n):n}var k=h.cookie=function(e,t,n){if(t!==undefined&&!h.isFunction(t)){if("number"==typeof(n=h.extend({},k.defaults,n)).expires){var r=n.expires,a=n.expires=new Date;a.setTime(+a+864e5*r)}return document.cookie=[g(e),"=",function i(e){return g(k.json?JSON.stringify(e):String(e))}(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var o,c=e?undefined:{},u=document.cookie?document.cookie.split("; "):[],l=0,s=u.length;l<s;l++){var p=u[l].split("="),f=(o=p.shift(),k.raw?o:decodeURIComponent(o)),d=p.join("=");if(e&&e===f){c=m(d,t);break}e||(d=m(d))===undefined||(c[f]=d)}return c};k.defaults={},h.removeCookie=function(e,t){return h.cookie(e)!==undefined&&(h.cookie(e,"",h.extend({},t,{expires:-1})),!h.cookie(e))}}($),{placeholder:function(){_placeholderHandle()},ieVersion:function(e){_ieVersion(e)},subStr:function(e,t){return e.length>t?e.substr(0,parseInt(t))+"...":e},strTrim:function(e){return e.replace(/(^\s+)|(\s+$)/g,"")},GetQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},parseURIParams:function(e){for(var t,n={},r=/\+/g,a=/([^&=]+)=?([^&]*)/g,i=function(e){return decodeURIComponent(e.replace(r," "))};t=a.exec(e);)n[i(t[1])]=i(t[2]);return n},objToQuery:function(e){var t=[];for(var n in e){var r=e[n=encodeURIComponent(n)];if(r&&r.constructor===Array){for(var a,i=[],o=0,c=r.length;o<c;o++)a=r[o],i.push(_toQueryPair(n,a));t=t.concat(i)}else t.push(_toQueryPair(n,r))}return t.join("&")},parseLocation:function(e){var t=location.search;return""!==t&&this.parseURIParams(t.substr(1))[e]||""},b64EncodeUrl:function(e){return window.BASE64?BASE64.encoder(e.replace("风格","")).replace("+","-").replace("/","_").replace("=",""):e},prettyDate:function(e){var t=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),n=((new Date).getTime()-t.getTime())/1e3,r=Math.floor(n/86400);if(!(isNaN(r)||r<0))return 31<=r?e:0===r&&((n<60?"刚刚":n<120&&"1分钟前")||n<3600&&Math.floor(n/60)+"分钟前"||n<7200&&"1个小时前"||n<86400&&Math.floor(n/3600)+"小时前")||1===r&&"昨天"||r<7&&r+"天前"||r<31&&Math.ceil(r/7)+"周前"},changeURLArg:function(url,arg,arg_val){url.indexOf("#")&&(url=url.split("#")[0]);var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},locationUrl:function(e){return window.open().location=e},pageCount:function(e,t){var n=Math.floor(e/t);return 0<e%t&&(n+=1),n},formatCurrency:function(e,t){t=t||"";var n,r=e.toString().replace(/\$|\,/g,"");isNaN(r)&&(r="0"),n=r==(r=Math.abs(r)),r=Math.floor(100*r+.50000000001),cents=r%100,r=Math.floor(r/100).toString(),cents<10&&(cents="0"+cents);for(var a=0;a<Math.floor((r.length-(1+a))/3);a++)r=r.substring(0,r.length-(4*a+3))+t+r.substring(r.length-(4*a+3));return(n?"":"-")+r+"."+cents},uriNext:function(e){return uriObj=this.parseURIParams(location.search.substr(1)),uriObj.next||e||""},optimizeUrl:function(e){var t=new RegExp("<[^>]*>","gi");return e=e.replace(t,"")},isEmail:function(e){return this.reEmail.test(e)},checkContentUrl:function(e){var t=!1,n=new RegExp("(http[s]{0,1}|ftp)?(:)?(//)?[a-zA-Z0-9\\.\\-]+\\.([a-zA-Z]{2,4})(:\\d+)?(/[a-zA-Z0-9\\.\\-~!@#$%^&*+?:_/=<>]*)?","gi"),r=new RegExp(".+.(png|PNG|jpg|JPG|bmp|gif|GIF)$");if(null===e.match(n))return!0;var a=[];if(""!==(a=(null===e.match(n)?"":e.match(n).toString()).split(",")))for(var i=0;i<a.length;i++)if(a[i]=this.optimizeUrl(a[i]),!r.test(a[i])&&!this.isEmail(a[i])&&!(0<=a[i].indexOf("fuwo"))){t=!0;break}return!t},checkUrl:function(e){return!1!==this.checkContentUrl(e)||(alert("发布内容中包含非本站点链接，请检查您的发布内容！"),!1)},changeAnchorColor:function(e){var t=new RegExp("<a","gi");return e.replace(t,'<a style="color:rgb(120,120,200)"')},ucFirst:function(e){return e.substring(0,1).toUpperCase()+e.substring(1)},parseUrl:function(e){var t,n={protocol:/([^\/]+:)\/\/(.*)/i,host:/(^[^\:\/]+)((?:\/|:|$)?.*)/,port:/\:?([^\/]*)(\/?.*)/,pathname:/([^\?#]+)(\??[^#]*)(#?.*)/},r={};for(p in r.href=e,n)t=n[p].exec(e),r[p]=t[1],""===(e=t[2])&&(e="/"),"pathname"===p&&(r.pathname=t[1],r.search=t[2],r.hash=t[3]);return r},getStyleTime:function(e){var t=new Date(1e3*e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate();return n+"-"+i(r)+"-"+i(a);function i(e){return parseInt(e)<10&&(e="0"+e),e}},goThisStock:function(e){try{!function t(e,t){try{return function n(){return window.external.EmObj}().EmFunc(e,t)}catch(r){}}("EM_FUNC_GOTO_TECH_VIEW","455,"+e)}catch(n){}},EMSSO:function(){var e="";return $.cookie("expertnews.ssourl")?e=$.cookie("expertnews.ssourl"):(e="&"+(e=location.search).substr(1,e.length),$.cookie("expertnews.pid",this.GetQueryString("pid")),$.cookie("expertnews.ssourl",e)),e},PC_JH:function(e,t){!function n(e,t){try{return function n(){return window.external.EmObj}().EmFunc(e,t)}catch(r){}}(e,t)},isIE8:function(){var e=navigator.appName,t=navigator.appVersion;return!("Microsoft Internet Explorer"!=e||-1==t.indexOf("MSIE8.0")&&!t.indexOf("MSIE7.0"))},thumbUP:function(e,t,n,r,o){var c=this,a=r||document;$(a).on("click",e,function(){var a=$(this),r=a.attr("data-newsid"),i=a.parent().find(".like"),e={url:window.gConfig.likeDataServer,type:"post",dataType:"json",contentType:"text/plain"};a.hasClass("liked")||(c.isIE8()&&(e={url:window.gConfig.likeDataServerJsonp,type:"get",dataType:"jsonp",contentType:"application/x-www-form-urlencoded; charset=utf-8"}),$.ajax({type:e.type,dataType:e.dataType,url:e.url,data:{uid:t,newsId:r,appId:n},success:function(e,t){if("success"===t){if(e.isSucess){o&&"function"==typeof o&&o(r,a.attr("data-stockCode"),Number(n)+1);var n=i.html();i.html(Number(n)+1),a.html("&#xe66b;").addClass("liked")}}else{n=i.html();i.html(Number(n)+1),a.html("&#xe66b;").addClass("liked")}},error:function(e,t,n){var r=i.html();i.html(Number(r)+1),a.html("&#xe66b;").addClass("liked")}}))})}}}),document.body.onselectstart=document.body.ondrag=function(){return!1};