define(["jquery","utils","handlebars","nicescroll"],function(e,a,i,t){({init:function(){a.appendSSO();var e=this;e.getUID=a.getUID(),e.getAppId=appIDcloudinfo,$.each(["#medialistScroll","#medialistScroll2","#iveNlPack","#iveNlPack2","#acScrollbox","#yaowenNlPack","#iveYwNlPack","#live-list"],function(e,a){0<$(a).length&&$(a).niceScroll({cursorcolor:"#666",cursoropacitymax:.5,touchbehavior:!1,cursorwidth:"6px",cursorborder:"0",cursorborderradius:"8px",autohidemode:!1})}),e.yqqLiveroomTypeShow(),e.yqqRecord(),e.livingList()},yqqRecord:function(){i.registerHelper("wang",function(e){return e==undefined||null==e||0==e.length?"":1e4<=e?Math.round(e/1e4)+"万":e}),$.ajax({url:window.gConfig.apiHost+"yqq/getyqqstats",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode){var a=['<li class="record-item">','    <span class="bg-yqq_states bg-yqq_states_1" ></span>','    <p class="con">专家博主<span>{{wang LiveRoomNum}}</span>名</p>',"</li>",'<li class="record-item">','   <span class="bg-yqq_states bg-yqq_states_2" ></span>','    <p class="con">实时观点<span>{{wang ContentNum}}</span>条</p>',"</li>",'<li class="record-item">','    <span class="bg-yqq_states bg-yqq_states_3" ></span>','    <p class="con">参与直播<span>{{wang QuestionNum}}</span>人</p>',"</li>",'<li class="record-item">','    <span class="bg-yqq_states bg-yqq_states_4" ></span>','    <p class="con">问答互动<span>{{wang UserNum}}</span>条</p>',"</li>"].join(""),t=i.compile(a)(e.Data);$("#record-list").empty().append(t)}},error:function(e,a,t){}})},livingList:function(){i.registerHelper("renderTime",function(e){return e=e==undefined||null==e||0==e.length?"":e.slice(11,16),new i.SafeString(e)});$.ajax({url:window.gConfig.apiHost+"yqq/getlatestlive",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode){var a=[" {{#each Data}}",'     <li class="live-item"><a href="http://yqq.emoney.cn/Live/UserLive?lid={{ room.Id }}" target="_blank">','        <span class="name">{{room.LiveName}}</span>','        <span class="time">{{renderTime room.LastModifyTime}}</span>','        <span class="desc">{{live.Content}}</span>',"        </a>","       </li>"," {{/each}}"].join(""),t=i.compile(a)(e);$("#live-list").append(t)}},error:function(e,a,t){}})},yqqLiveroomTypeShow:function(){var t=this;i.registerHelper("renderTime",function(e){return e=e==undefined||null==e||0==e.length?"":e.slice(11,16),new i.SafeString(e)});var s=['<ul class="sub-list">',"{{#each Data}}",'<li class="sub-item">','<a href="'+pagerouter.yqqUserLive+'?lid={{ Id }}" target="_blank"><img src="{{ LiveImg }}" /></a>','<p class="sub-title"><a href="'+pagerouter.yqqUserLive+'?lid={{ Id }}" target="_blank">{{ LiveName }}</a></p>','<p class="sub-summary"><a href="'+pagerouter.yqqUserLive+'?lid={{ Id }}" target="_blank">{{ Content }}</a></p>',"</a></li>","{{/each}}","</ul>"].join("");$.each([{ltype:"4",dom:"#LRtype4"},{ltype:"2",dom:"#LRtype2"},{ltype:"3",dom:"#LRtype3"}],function(e,a){t.yqqLRTList(a.ltype,$(a.dom),s)})},yqqLRTList:function(e,t,s){$.ajax({url:window.gConfig.apiHost+"yqq/gettagsliverooms",type:"GET",data:{tags:e},timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode&&0<e.Data.length){e.Data=e.Data.slice(0,3);var a=i.compile(s+"")(e);t.html(a)}},error:function(e,a,t){}})}}).init()});