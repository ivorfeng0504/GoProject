define(["jquery"],function($){$.support.cors=!0,Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var t=this.length>>>0,n=Number(arguments[1])||0;for((n=n<0?Math.ceil(n):Math.floor(n))<0&&(n+=t);n<t;n++)if(n in this&&this[n]===e)return n;return-1}),$.extend({emoneyAanalytics:function(){var u={};function s(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}return{Init:function e(e,t,n){u.App=e,u.Module=t;var r=$.cookie("expertnews.uid")||s("uid")||0,i=$.cookie("expertnews.cid")||s("cid")||0,o=$.cookie("expertnews.pid")||s("pid")||0;if(!r){var a=$.cookie("expertnews.ssourl");r=a.match(/uid=([\d]+)/)?a.match(/uid=([\d]+)/)[1]:"",i=a.match(/cid=([\d]+)/)?a.match(/cid=([\d]+)/)[1]:"",o=a.match(/pid=([\d]+)/)?a.match(/pid=([\d]+)/)[1]:""}var c=$.cookie("tongji_globalid")||"";u._tjglobalid=c,u.Remark=r+"|"+i+"|"+o,$(document).on("click","[clickkey]",function(e){var t=$(this);u._clickkey=t.attr("clickkey"),u._clickdata=t.attr("clickdata"),u._clickremark=t.attr("clickremark"),u._htmltype="";var n=t.attr("data-senddate")||0,r=(new Date).getTime();(3e3<r-n||!n)&&(t.attr("data-senddate",r),function i(){var e=window.top.location.href;if(""!=u.App&&""!=u._clickkey){var t="http://aliapi.tongji.emoney.cn/Page/PageClick?v="+Math.random()+"&tongji_globalid="+u._tjglobalid+"&app="+u.App+"&module="+u.Module+"&clickkey="+u._clickkey+"&clickdata="+u._clickdata+"&clickremark="+u._clickremark+"&htmltype="+u._htmltype+"&pageurl="+encodeURIComponent(e)+"&remark="+u.Remark,n=document.createElement("script");n.src=t,n.type="text/javascript",n.style.display="none",document.body.appendChild(n)}}())})}}}}),Array.prototype.remove=function(e){var t=this.indexOf(e);-1<t&&this.splice(t,1)};var _toQueryPair=function(e,t){return void 0===t?e:e+"="+encodeURIComponent(null===t?"":String(t))},windowCommFunc={NewsOpenStock:function(e){var t=$(e).attr("stockcode"),n=$(e).attr("stocktype");return"A股"==n?windowCommFunc.GoKLine(t):"行业板块"==n&&windowCommFunc.GoBKLine(t),!1},GoKLine:function(e){return 6==e.length&&parseInt(e)<6e5&&(e="1"+e),windowCommFunc.goThisStock(e),!1},GoBKLine:function(e){return 6==e.length&&(e=e.substr(2,4)),4==e.length&&(e="BK"+e),windowCommFunc.goThisStock(e),!1},goThisStock:function(e){try{!function t(e,t){try{return function n(){return window.external.EmObj}().EmFunc(e,t)}catch(r){}}("EM_FUNC_GOTO_TECH_VIEW","455,"+e)}catch(n){}}};return window.NewsOpenStock=windowCommFunc.NewsOpenStock,$.callEvent=function(e,t,n,r,i){var o,a=$.Event(e);return r&&($(r).trigger(a,i),o=a.result),$.isFunction(t)&&(o=t.apply(n,$.isArray(i)?i:[i])),o},$.fn.callEvent=function(e,t,n){return $.callEvent(t,e.options?e.options[t]:null,e,this,n)},$.bindFn=function(e,o,a){var t=$.fn[e],c=o.NAME||"feui."+e;$.fn[e]=function(r,i){return this.each(function(){var e=$(this),t=e.data(c),n="object"==typeof r&&r;a&&(n=$.extend(n,a)),t||e.data(c,t=new o(e,n)),"string"==typeof r&&t[r].apply(t,$.isArray(i)?i:[i])})},$.fn[e].Constructor=o,$.fn[e].noConflict=function(){return $.fn[e]=t,this}},$.formatDate=function(e,t){e instanceof Date||(e=e.replace("T"," "),e=new Date(e));var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"S+":e.getMilliseconds()};for(var r in/(y+)/i.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[r]:("00"+n[r]).substr((""+n[r]).length)));return t},$.format=function(e,t){if(e instanceof Date)return $.formatDate(e,t);var n;if(1<arguments.length)if(2==arguments.length&&"object"==typeof t)for(var r in t)t[r]!==undefined&&(n=new RegExp("({"+r+"})","g"),e=e.replace(n,t[r]));else for(var i=1;i<arguments.length;i++)arguments[i]!==undefined&&(n=new RegExp("({["+(i-1)+"]})","g"),e=e.replace(n,arguments[i]));return e},$.calValue=function(e,t,n){return $.isFunction(e)?e.apply(t,$.isArray(n)?n:[n]):e},$.is$=function(e){return window.jQuery===$?e instanceof jQuery:$.zepto.isZ(e)},$.isStr=function(e){return"string"==typeof e},$.isNum=function(e){return"number"==typeof e},$.setFontSize=function(e,t){var n=2,r=16,i=$("[data-fontsizecnt]")[0];e<0&&(n=-2),r=32<(r=(r=parseInt((""==i.style.fontSize?r+"":i.style.fontSize).replace("px",""))+n)<12?12:r)?32:r,i.style.lineHeight=1.7*r+"px",i.style.fontSize=r+"px"},$.TapName="ontouchstart"in document.documentElement?"touchstart":"click",$.uuid||($.uuid=(Math.random()+"").slice(-10)),$.getUUID=function(){for(var e=[],t="0123456789abcdef",n=0;n<36;n++)e[n]=t.substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]=t.substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},function(h){var i=/\+/g;function g(e){return v.raw?e:encodeURIComponent(e)}function m(e,t){var n=v.raw?e:function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(i," ")),v.json?JSON.parse(e):e}catch(t){}}(e);return h.isFunction(t)?t(n):n}var v=h.cookie=function(e,t,n){if(t!==undefined&&!h.isFunction(t)){if("number"==typeof(n=h.extend({},v.defaults,n)).expires){var r=n.expires,i=n.expires=new Date;i.setTime(+i+864e5*r)}return document.cookie=[g(e),"=",function o(e){return g(v.json?JSON.stringify(e):String(e))}(t),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}for(var a,c=e?undefined:{},u=document.cookie?document.cookie.split("; "):[],s=0,l=u.length;s<l;s++){var p=u[s].split("="),d=(a=p.shift(),v.raw?a:decodeURIComponent(a)),f=p.join("=");if(e&&e===d){c=m(f,t);break}e||(f=m(f))===undefined||(c[d]=f)}return c};v.defaults={},h.removeCookie=function(e,t){return h.cookie(e)!==undefined&&(h.cookie(e,"",h.extend({},t,{expires:-1})),!h.cookie(e))}}($),{placeholder:function(){_placeholderHandle()},ieVersion:function(e){_ieVersion(e)},subStr:function(e,t){return e.length>t?e.substr(0,parseInt(t))+"...":e},strTrim:function(e){return e.replace(/(^\s+)|(\s+$)/g,"")},GetQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},parseURIParams:function(e){for(var t,n={},r=/\+/g,i=/([^&=]+)=?([^&]*)/g,o=function(e){return decodeURIComponent(e.replace(r," "))};t=i.exec(e);)n[o(t[1])]=o(t[2]);return n},objToQuery:function(e){var t=[];for(var n in e){var r=e[n=encodeURIComponent(n)];if(r&&r.constructor===Array){for(var i,o=[],a=0,c=r.length;a<c;a++)i=r[a],o.push(_toQueryPair(n,i));t=t.concat(o)}else t.push(_toQueryPair(n,r))}return t.join("&")},parseLocation:function(e){var t=location.search;return""!==t&&this.parseURIParams(t.substr(1))[e]||""},b64EncodeUrl:function(e){return window.BASE64?BASE64.encoder(e.replace("风格","")).replace("+","-").replace("/","_").replace("=",""):e},prettyDate:function(e){var t=new Date((e||"").replace(/-/g,"/").replace(/[TZ]/g," ")),n=((new Date).getTime()-t.getTime())/1e3,r=Math.floor(n/86400);if(!(isNaN(r)||r<0))return 31<=r?e:0===r&&((n<60?"刚刚":n<120&&"1分钟前")||n<3600&&Math.floor(n/60)+"分钟前"||n<7200&&"1个小时前"||n<86400&&Math.floor(n/3600)+"小时前")||1===r&&"昨天"||r<7&&r+"天前"||r<31&&Math.ceil(r/7)+"周前"},changeURLArg:function(url,arg,arg_val){url.indexOf("#")&&(url=url.split("#")[0]);var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},locationUrl:function(e){return window.open().location=e},pageCount:function(e,t){var n=Math.floor(e/t);return 0<e%t&&(n+=1),n},formatCurrency:function(e,t){t=t||"";var n,r=e.toString().replace(/\$|\,/g,"");isNaN(r)&&(r="0"),n=r==(r=Math.abs(r)),r=Math.floor(100*r+.50000000001),cents=r%100,r=Math.floor(r/100).toString(),cents<10&&(cents="0"+cents);for(var i=0;i<Math.floor((r.length-(1+i))/3);i++)r=r.substring(0,r.length-(4*i+3))+t+r.substring(r.length-(4*i+3));return(n?"":"-")+r+"."+cents},uriNext:function(e){return uriObj=this.parseURIParams(location.search.substr(1)),uriObj.next||e||""},optimizeUrl:function(e){var t=new RegExp("<[^>]*>","gi");return e=e.replace(t,"")},isEmail:function(e){return this.reEmail.test(e)},checkContentUrl:function(e){var t=!1,n=new RegExp("(http[s]{0,1}|ftp)?(:)?(//)?[a-zA-Z0-9\\.\\-]+\\.([a-zA-Z]{2,4})(:\\d+)?(/[a-zA-Z0-9\\.\\-~!@#$%^&*+?:_/=<>]*)?","gi"),r=new RegExp(".+.(png|PNG|jpg|JPG|bmp|gif|GIF)$");if(null===e.match(n))return!0;var i=[];if(""!==(i=(null===e.match(n)?"":e.match(n).toString()).split(",")))for(var o=0;o<i.length;o++)if(i[o]=this.optimizeUrl(i[o]),!r.test(i[o])&&!this.isEmail(i[o])&&!(0<=i[o].indexOf("newcelue"))){t=!0;break}return!t},checkUrl:function(e){return!1!==this.checkContentUrl(e)||(alert("发布内容中包含非本站点链接，请检查您的发布内容！"),!1)},replaceTarget:function(e){return e=(e=e.replace(/target/gi,"target1")).replace(/<(a\s+href=['\"]{0,1}http[s]{0,1}:\/\/.+?['\"]{0,1})>(.+?)<\/a>/gi,"<$1 target='_blank'>$2</a>")},changeAnchorColor:function(e){var t=new RegExp("<a","gi");return e.replace(t,'<a style="color:rgb(120,120,200)"')},ucFirst:function(e){return e.substring(0,1).toUpperCase()+e.substring(1)},parseUrl:function(e){var t,n={protocol:/([^\/]+:)\/\/(.*)/i,host:/(^[^\:\/]+)((?:\/|:|$)?.*)/,port:/\:?([^\/]*)(\/?.*)/,pathname:/([^\?#]+)(\??[^#]*)(#?.*)/},r={};for(p in r.href=e,n)t=n[p].exec(e),r[p]=t[1],""===(e=t[2])&&(e="/"),"pathname"===p&&(r.pathname=t[1],r.search=t[2],r.hash=t[3]);return r},getStyleTime:function(e){var t=new Date(1e3*e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate();return n+"-"+o(r)+"-"+o(i);function o(e){return parseInt(e)<10&&(e="0"+e),e}},goThisStock:function(e){try{!function t(e,t){try{return function n(){return window.external.EmObj}().EmFunc(e,t)}catch(r){}}("EM_FUNC_GOTO_TECH_VIEW","455,"+e)}catch(n){}},EMSSO:function(){var e="";return $.cookie("expertnews.ssourl")?e=$.cookie("expertnews.ssourl"):(e="&"+(e=(e=location.search).substr(1,e.length)),$.cookie("expertnews.pid",this.GetQueryString("pid")),$.cookie("expertnews.ssourl",e)),e},isIE8:function(){var e=navigator.appName,t=navigator.appVersion;return!("Microsoft Internet Explorer"!=e||-1==t.indexOf("MSIE8.0")&&!t.indexOf("MSIE7.0"))},thumbUP:function(e,n,r,t){var c=this;n=c.getUID();var i=t||document;$(i).on("click",e,function(){var i=$(this),e=i.attr("data-channelid"),o=$("#liked"+e),a=$("#likeicon"+e),t={url:window.gConfig.likeDataServer,type:"post",dataType:"json",contentType:"text/plain"};i.hasClass("liked")||(c.isIE8()&&(t={url:window.gConfig.likeDataServerJsonp,type:"get",dataType:"jsonp",contentType:"application/x-www-form-urlencoded; charset=utf-8"}),$.ajax({type:t.type,dataType:t.dataType,url:t.url,data:{uid:n,newsId:e,appId:r},success:function(e,t){if("success"===t){if(e.isSucess){i.addClass("liked");var n=o.html();o.html(Number(n)+1),a.html("&#xe66b;")}}else{i.addClass("liked");n=o.html();o.html(Number(n)+1),a.html("&#xe66b;")}},error:function(e,t,n){i.addClass("liked");var r=o.html();o.html(Number(r)+1),a.html("&#xe66b;")}}))})},appendSSO:function(e){var t,n,r=this.EMSSO();decodeSSOSTR=r.replace(/^[&|%26]+/g,""),e=e||$(".zth-nav"),$("a",e).each(function(){t=$(this),n=t.attr("href"),t.attr("href",n+(-1!=n.indexOf("?")?"&":"?")+decodeSSOSTR)})},loadingTip:function(e,t){if(!$("#loadingsComm").length){var n='<div class="loadings" id="loadingsComm"><img src="'+imgLoadings+'"/>正在加载...</div>';$("body").append(n)}$("#loadingsComm").removeClass("close").css({top:e,left:t})},hideTips:function(){$("#loadingsComm").addClass("close")},getUID:function(){return $.cookie("expertnews.uid")||this.GetQueryString("uid")||0}}});