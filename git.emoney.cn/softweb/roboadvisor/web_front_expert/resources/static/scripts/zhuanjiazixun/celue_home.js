define(["jquery","cors","utils","nicescroll"],function(e,i,p,t){var d={nonedataHtml:'<div class="no-info">暂无数据显示，请稍后重试</div>',init:function(){p.appendSSO();var e=this;e.getUID=p.getUID(),e.getAppId=appIDcloudinfo,$.each([".ztc-box"],function(e,i){0<$(i).length&&$(i).niceScroll({cursorcolor:"#666",cursoropacitymax:.5,touchbehavior:!1,cursorwidth:"6px",cursorborder:"0",cursorborderradius:"8px",autohidemode:!1})}),e.expertStrategy(),e.liveScroll();setInterval(function(){e.livingList()},18e4);Handlebars.registerHelper("filterSymbol",function(e){return e.replace(/[&\|\\\*^%$#@\-][a-zA-Z]+?;/gi," ")})},liveScroll:function(){$.fn.extend({newScroll:function(){var e=$(this);setInterval(function(){$(e).find("li:first").animate({marginTop:"82px"},500,function(){$(this).css({marginTop:"0"}),$(e).prepend($(e).find("li:last"))})},3500)}}),$(".live-list").newScroll()},expertStrategy:function(){var i=this;$.ajax({url:window.gConfig.apiHost+"yqq/expert_entireyqq",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){0==e.RetCode&&e.Data&&(i.livelistdata=e.Data.LatestLive,i.mergeLiveingLstHtml(),i.liveRecord=e.Data.YqqStat,i.mergeYqqStatHtml(),i.yqqexpert=e.Data.TypeGroup,i.mergeGroupHtml())},error:function(e,i,t){}})},mergeGroupHtml:function(){var e=[{ltype:"short_term",dom:"#LRtype4"},{ltype:"value",dom:"#LRtype2"},{ltype:"operate",dom:"#LRtype3"}],i=this.yqqexpert;if(i){var t=['<ul class="sub-list">',"{{#each this}}",'<li class="sub-item">','<a class="sub-item-link" href="'+pagerouter.yqqUserLive+"?lid={{ Id }}&"+p.EMSSO()+'" target="_blank" clickkey="lrtype4|logo" clickdata="{{Id}}|yqqLive" clickremark=""><img src="{{ LiveImg }}" /></a>','<div class="cont-box">','<p class="sub-title"><a href="'+pagerouter.yqqUserLive+"?lid={{ Id }}&"+p.EMSSO()+'" target="_blank" clickkey="lrtype4|name" clickdata="{{Id}}|yqqLive" clickremark="">{{ LiveName }}</a></p>','<p class="sub-summary"><a href="'+pagerouter.yqqUserLive+"?lid={{ Id }}&"+p.EMSSO()+'" target="_blank" clickkey="lrtype4|summary" clickdata="{{Id}}|yqqLive" clickremark="">{{ filterSymbol Content }}</a></p>',"</div>",'<div class="clearfloat"></div>',"</li>","{{/each}}","</ul>"].join("");for(s=0;s<e.length;s++){if(i[(r=e[s]).ltype]){var a=i[r.ltype];a=a.slice(0,3);var l=Handlebars.compile(t+"")(a);$(r.dom).html(l),1==s?($(r.dom).find(".sub-item-link").attr("clickkey","lrtype2|logo"),$(r.dom).find(".sub-title a").attr("clickkey","lrtype2|name"),$(r.dom).find(".sub-summary a").attr("clickkey","lrtype2|summary")):2==s&&($(r.dom).find(".sub-item-link").attr("clickkey","lrtype1|logo"),$(r.dom).find(".sub-title a").attr("clickkey","lrtype1|name"),$(r.dom).find(".sub-summary a").attr("clickkey","lrtype1|summary"))}}}else for(var s=0;s<e.length;s++){var r=e[s];$(r.dom).html(d.nonedataHtml)}},mergeYqqStatHtml:function(){var e=this.liveRecord;if(e){Handlebars.registerHelper("wang",function(e){return e==undefined||null==e||0==e.length?"":1e4<=e?Math.round(e/1e4)+"万":e});var i=['<li class="record-item">','    <span class="bg-yqq_states bg-yqq_states_1" ></span>','    <p class="con">专家博主<span>{{wang LiveRoomNum}}</span>名</p>',"</li>",'<li class="record-item">','   <span class="bg-yqq_states bg-yqq_states_2" ></span>','    <p class="con">实时观点<span>{{wang ContentNum}}</span>条</p>',"</li>",'<li class="record-item">','    <span class="bg-yqq_states bg-yqq_states_3" ></span>','    <p class="con">参与直播<span>{{wang QuestionNum}}</span>人</p>',"</li>",'<li class="record-item">','    <span class="bg-yqq_states bg-yqq_states_4" ></span>','    <p class="con">问答互动<span>{{wang UserNum}}</span>条</p>',"</li>"].join(""),t=Handlebars.compile(i)(e);$("#record-list").empty().append(t)}},mergeLiveingLstHtml:function(){var e=this.livelistdata;if(!e)return $("#live-list,#live-list-wrap,#visit-more-list-wrap").find(".no-info").remove(),void $("#live-list,#live-list-wrap,#visit-more-list-wrap").addClass("no-info-cnt").append(d.nonedataHtml);Handlebars.registerHelper("renderTime",function(e){return e=e==undefined||null==e||0==e.length?"":e.slice(11,16),new Handlebars.SafeString(e)});var i=e.ScrollList,t=e.HotList,a=e.VipList,l=[" {{#each this}}",'     <li class="live-item">','        <a href="'+pagerouter.yqqUserLive+"?lid={{ LId }}&"+p.EMSSO()+'" target="_blank" clickkey="zhengzaizhibo|logo" clickdata="{{ LId }}|yqqLive" clickremark=""><img class="iamge" src="{{LiveImg}}"/></a>','        <a href="'+pagerouter.yqqUserLive+"?lid={{ LId }}&"+p.EMSSO()+'" target="_blank" clickkey="zhengzaizhibo|name" clickdata="{{ LId }}|yqqLive" clickremark=""><span class="name">{{LiveName}}</span></a>','        <span class="time">{{renderTime NewContentTime}}</span>','        <a class="desc-link" href="'+pagerouter.yqqUserLive+"?lid={{ LId }}&"+p.EMSSO()+'" target="_blank" clickkey="zhengzaizhibo|summary"     clickdata="{{ LId }}|yqqLive"     clickremark=""><span class="desc">{{ LiveNewContent}}</span></a>','        <a class="enter-live-btn" href="'+pagerouter.yqqUserLive+"?lid={{ LId }}&"+p.EMSSO()+'" target="_blank"><span>进入直播间</span></a>',"       </li>"," {{/each}}"].join(""),s=[" {{#each this}}",'<li class="vip-item">','   <a class="vip-item-link" href="'+pagerouter.yqqUserLive+"?lid={{LId}}&"+p.EMSSO()+'"  target="_blank" clickkey="huoyuezhibojian|huoyue" clickdata="{{LId}}|yqqLive" clickremark="">','     <img class="image" src="{{LiveImg}}"/>','       <div class="desc">','          <p class="title">{{LiveName}}</p>','          <p class="summary">{{LiveIntro}}</p>',"        </div>","    </a>"," </li>"," {{/each}}"].join(""),r=[" {{#each this}}",'<li class="vip-item">','   <a class="vip-item-link" href="'+pagerouter.yqqUserLive+"?lid={{LId}}&"+p.EMSSO()+'" target="_blank" clickkey="VIPzhibojian|vip" clickdata="{{LId}}|yqqLive" clickremark="">','     <img class="image" src="{{LiveImg}}"/>','       <div class="desc">','          <p class="title">{{LiveName}}</p>','          <p class="summary">{{LiveIntro}}</p>',"        </div>","    </a>"," </li>"," {{/each}}"].join("");if(i&&i.length){var n=Handlebars.compile(l)(i);$("#live-list,#live-list-wrap,#visit-more-list-wrap").find(".no-info").remove(),$("#live-list").append(n)}else $("#live-list").html(d.nonedataHtml);if(t&&t.length){var o=Handlebars.compile(s)(t);$("#visit-more-list-wrap").append(o)}else $("#visit-more-list-wrap").html(d.nonedataHtml);if(r&&r.length){var c=Handlebars.compile(r)(a);$("#live-list-wrap").append(c)}else $("#live-list-wrap").html(d.nonedataHtml)},yqqRecord:function(){var i=this;$.ajax({url:window.gConfig.apiHost+"yqq/getyqqstats",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){0==e.RetCode&&e.Data&&(i.liveRecord=e.Data,i.mergeYqqStatHtml())},error:function(e,i,t){}})},livingList:function(){Handlebars.registerHelper("renderTime",function(e){return e=e==undefined||null==e||0==e.length?"":e.slice(11,16),new Handlebars.SafeString(e)});var i=this;$.ajax({url:window.gConfig.apiHost+"yqq/getyqqhomedata",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){0==e.RetCode?(i.livelistdata=e.Data,i.mergeLiveingLstHtml()):($("#live-list,#live-list-wrap,#visit-more-list-wrap").find(".no-info").remove(),$("#live-list,#live-list-wrap,#visit-more-list-wrap").addClass("no-info-cnt").append(d.nonedataHtml))},error:function(e,i,t){$("#live-list,#live-list-wrap,#visit-more-list-wrap").find(".no-info").remove(),$("#live-list,#live-list-wrap,#visit-more-list-wrap").addClass("no-info-cnt").append(d.nonedataHtml)}})},yqqLiverooms:function(){var i=this,l=[{ltype:"short_term",dom:"#LRtype4"},{ltype:"value",dom:"#LRtype2"},{ltype:"operate",dom:"#LRtype3"}];$.ajax({url:window.gConfig.apiHost+"yqq/getexpertliveindex",type:"GET",data:{},timeout:ajaxTimeout,dataType:"JSON",success:function(e){i.yqqexpert=e.Data,i.mergeGroupHtml()},error:function(e,i,t){for(var a=0;a<l.length;a++){$(l[a].dom).html(d.nonedataHtml)}}})}};d.init(),$.emoneyAanalytics().Init(tjAppid.expert,"celue_home","")});