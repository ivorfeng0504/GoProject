require(["jquery","utils","handlebars"],function(l,r,d){window.themeTimer;var m={nonedataHtml:'<div class="no-info">暂无数据显示，请稍后重试</div>',init:function(){var e=this;alert(2),r.appendSSO(),l.cookie("expertnews.uid")?e.getUID=l.cookie("expertnews.uid"):(e.getUID=r.GetQueryString("uid")||0,l.cookie("expertnews.uid",e.getUID)),e.handerbarsStr(),e.getIndexData();var t=r.EMSSO();decodeSSOSTR=t.replace(/^[&|%26]+/g,""),l("#loadLiveMore").attr("href",pagerouter.yqqPage+"/home/index?"+decodeSSOSTR),themeTimer=setInterval(function(){e.themeApi()},18e4)},handerbarsStr:function(){d.registerHelper("subStr",function(e,t){return e==undefined||null==e||0==e.length?time="":e.length>t&&(e=l.trim(e).substr(0,t)+"..."),new d.SafeString(e)}),d.registerHelper("percent",function(e){function t(e){return Math.round(e)===e}if(e==undefined||null==e||0==e.length)time="";else if(t(e))if(0==e){var a=new Date,i=a.getHours(),n=a.getMinutes();9==i&&0<=n&&n<=30?e="-":e+=".00%"}else e+=".00%";else t(e)||(e+="%");return new d.SafeString(e)}),d.registerHelper("upOrDown",function(e){return e=e==undefined||null==e||0==e.length?"":0<e?"increase":e<0?"down":"",new d.SafeString(e)}),d.registerHelper("secondcheck",function(e){return e=0==e?"first":"second",new d.SafeString(e)}),d.registerHelper("addSecondClass",function(e){return 1==e?"":"second"}),d.registerHelper("renderDateTime",function(e){var t;return t=e==undefined||null==e||0==e.length?"":e.slice(5,10),new d.SafeString(t)}),d.registerHelper("renderTime",function(e){return e=e==undefined||null==e||0==e.length?"":e.slice(11,16),new d.SafeString(e)}),d.registerHelper("StockCodeCheck",function(e){return e==undefined||null==e||0==e.length?time="":e="6"!=e[0]?"1"+e:e,new d.SafeString(e)})},getIndexData:function(){var a=this,i=l(".news-list,#hot-viewpoint-list,#theme-list,#forecast-list,#live-list-wrap");l.ajax({url:window.gConfig.apiHost+"expertnews/indexdata",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode&&e.Message){var t=e.Message;a.mergeDailyNewstHtml(t.JrttList),a.mergeHotViewsHtml(t.ClkpList),a.mergeForcastHtml(t.PhycList),a.mergeTopicListHtml(t.TopicList),a.mergeLiveHtml(t.ZjzbList)}else i.find(".no-info").remove(),i.addClass("no-info-cnt").html(m.nonedataHtml),l(".news-list").removeClass("no-info-cnt")},error:function(e,t,a){i.find(".no-info").remove(),i.addClass("no-info-cnt").html(m.nonedataHtml),l(".news-list").removeClass("no-info-cnt")}})},mergeDailyNewstHtml:function(e){var t=l(".news-list");if(!e||!e.length)return t.find(".no-info").remove(),void t.append(m.nonedataHtml);var a=["{{#each this}}",'<a href="'+pagerouter.yaowenArticle+'?NewsID={{NewsInformationId}}&source=3&from=0" clickkey="jinritoutiao|title" clickdata="{{NewsInformationId}}|yaowen_article" clickremark="" class="{{secondcheck @index}} "><span class="time">{{renderTime PublishTime}}</span> {{ArticleTitle}}</a> {{/each}}'].join(""),i=d.compile(a)(e);t.find(".no-info").remove(),t.removeClass("no-info-cnt").append(i)},mergeHotViewsHtml:function(e){var t=l("#hot-viewpoint-list");if(!e||!e.length)return t.find(".no-info").remove(),void t.addClass("no-info-cnt").append(m.nonedataHtml);var a=["{{#each this}}",'<li class="item ">','<a href="'+pagerouter.zhuanjiacelueList+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&ColumnID="+confColumnID+'&currpage=1&pageSize=3" class="item-link" clickkey="dakakanpan|logo" clickdata="{{StrategyInfo.ID}}|zhuanjiaceluelist" clickremark=""><img src="{{StrategyInfo.StrategyImg}}" /></a>','<div class="hot-list ">','<a class="second-title" href="'+pagerouter.zhuanjiacelueList+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&ColumnID="+confColumnID+'&currpage=1&pageSize=3" clickkey="dakakanpan|title" clickdata="{{StrategyInfo.ID}}|zhuanjiaceluelist" clickremark="">{{StrategyInfo.StrategyName}}</a><span class="time">{{renderDateTime NewsInfo.CreateTime}}&nbsp;&nbsp;{{renderTime NewsInfo.CreateTime}}</span><div class="clearfloat"></div>','<a class="strategySummary" href="'+pagerouter.celueArticle+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&NewsID={{NewsInfo.ID}}&ColumnID="+confColumnID+'&source=ll&currpage=1&pageSize=6" clickkey="dakakanpan|summary" clickdata="{{StrategyInfo.ID}}|celueArticle" clickremark="">',"{{#if  NewsInfo.Summary}}","{{subStr NewsInfo.Summary 39}}","{{else}}","{{subStr NewsInfo.Title 39}}","{{/if}}","</a></div>","</li>","{{/each}}"].join(""),i='<a href="'+pagerouter.celueArticle+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&NewsID={{NewsInfo.ID}}&ColumnID="+confColumnID+'&currpage=1&pageSize=3" class="more" id="estrategyMore" clickkey="dakakanpan|more" clickdata="list|zhuanjiaceluelist" clickremark="">更多<i class="icon-1">&#xe656;</i></a>',n=d.compile(i)(e[0]);l(".hot-viewpoint .title").after(n);var r=d.compile(a)(e);t.find(".no-info").remove(),t.removeClass("no-info-cnt").append(r)},mergeTopicListHtml:function(e){var t=l("#theme-list");if(!e||!e.length)return t.find(".no-info").remove(),void t.addClass("no-info-cnt").append(m.nonedataHtml);var a=960<l(window).width()?"{{subStr TopicSummary 24}}":"{{subStr TopicSummary 26}}",i=["{{#each this}}",'<li class="itme first">','<a class="topicName" href="'+pagerouter.zhuti+'?topicId={{ID}}" clickkey="zhuti|title" clickdata="{{ID}}|zhuti" clickremark="">{{TopicName}}</a>','<div class="summary-box ">','<a class="summary " href="'+pagerouter.zhuti+'?topicId={{ID}}" clickkey="zhuti|summary" clickdata="{{ID}}|zhuti" clickremark="">',a,"</a>{{#each RelatedStockList}}",'<p class="recommend "><span class="type" data-stockCode={{StockCodeCheck StockCode}}>{{this.StockName}}</span><span class="{{upOrDown this.StockF}}">{{percent this.StockF}}</span></p>',"{{/each}}","</div>","</li>","{{/each}}"].join(""),n=d.compile(i)(e);t.removeClass("no-info-cnt").empty().append(n),r.appendSSO(l(".theme")),t.on("click",".type",function(){var e=l(this);r.goThisStock(e.attr("data-stockCode"))})},mergeLiveHtml:function(e){var t=l("#live-list-wrap");if(!e||!e.length)return t.find(".no-info").remove(),void t.addClass("no-info-cnt").append(m.nonedataHtml);var a=["{{#each this}}",'<li class="item ">','<a class="pic-link " href="'+pagerouter.yqqUserLive+"?lid={{Id}}"+r.EMSSO()+'" target="_blank " clickkey="zhuanjiazhibo|logo" clickdata="{{Id}}|yqqLive" clickremark=""><img src="{{LiveImg}} " /></a>','<div class="content ">','<a class="title-link " href="'+pagerouter.yqqUserLive+"?lid={{Id}}"+r.EMSSO()+'" target="_blank " clickkey="zhuanjiazhibo|title" clickdata="{{Id}}|yqqLive" clickremark="">','<p class="second-title ">{{LiveName}}</p>',"</a>",'<a class="desc " href="'+pagerouter.yqqUserLive+"?lid={{Id}}"+r.EMSSO()+'" target="_blank " clickkey="zhuanjiazhibo|summary" clickdata="{{Id}}|yqqLive" clickremark="">{{LiveIntro}}</a>',"</div>","</li>","{{/each}}"].join(""),i=d.compile(a)(e);t.find(".no-info").remove(),t.removeClass("no-info-cnt").append(i)},mergeForcastHtml:function(e){var t=l("#forecast-list");if(!e||!e.length)return t.find(".no-info").remove(),void t.addClass("no-info-cnt").append(m.nonedataHtml);var a=960<l(window).width()?"{{subStr ArticleSummary 56}}":"{{subStr ArticleSummary 48}}",i=["{{#each this}}",'<div class="list ">','<a class="pic-link " href="'+pagerouter.yuceArticle+'?NewsID={{NewsInformationId}} " clickkey="panhouyuce|title"  clickdata="{{NewsInformationId}}|yuce_article"  clickremark="">{{NewsTags}}</a>','<a class="desc " href="'+pagerouter.yuceArticle+'?NewsID={{NewsInformationId}} " clickkey="panhouyuce|title" clickdata="{{NewsInformationId}}|yuce_article"  clickremark="">',a,"</a>","</a>",'<p class="time">{{renderDateTime PublishTime}}&nbsp;&nbsp;&nbsp;{{renderTime PublishTime}}</p>',"</div>","{{/each}}"].join(""),n=d.compile(i)(e);t.find(".no-info").remove(),t.removeClass("no-info-cnt").append(n)},themeApi:function(){var n=this,r=l("#theme-list"),e=960<l(window).width()?"{{subStr TopicSummary 24}}":"{{subStr TopicSummary 26}}";["{{#each Message}}",'<li class="itme first">','<a class="topicName" href="'+pagerouter.zhuti+'?topicId={{ID}}" clickkey="zhuti|title" clickdata="{{ID}}|zhuti" clickremark="">{{TopicName}}</a>','<div class="summary-box ">','<a class="summary " href="'+pagerouter.zhuti+'?topicId={{ID}}" clickkey="zhuti|summary" clickdata="{{ID}}|zhuti" clickremark="">',e,"</a>{{#each RelatedStockList}}",'<p class="recommend "><span class="type" data-stockCode={{StockCodeCheck StockCode}}>{{this.StockName}}</span><span class="{{upOrDown this.StockF}}">{{percent this.StockF}}</span></p>',"{{/each}}","</div>","</li>","{{/each}}"].join("");l.ajax({url:window.gConfig.apiHost+"topic/GetTopicList?currpage=1&pageSize=3",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode&&e.Message&&0<e.Message.length){for(var t=[],a=0;a<e.Message.length;a++)if(0!=e.Message[a].ID){var i=e.Message[a];i.RelatedStockList=i.RelatedStockList.sort(function(e,t){return e.StockSortIndex>t.StockSortIndex}),i.RelatedStockList=i.RelatedStockList.slice(0,2),t.push(i)}n.mergeTopicListHtml(t)}else r.addClass("no-info-cnt").html(m.nonedataHtml)},error:function(e,t,a){r.addClass("no-info-cnt").html(m.nonedataHtml)}})},hotViewsApi:function(){l(window).width();var s=["{{#each Message}}",'<li class="item ">','<a href="'+pagerouter.zhuanjiacelueList+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&ColumnID="+confColumnID+'&currpage=1&pageSize=3" class="item-link" clickkey="dakakanpan|logo" clickdata="{{StrategyInfo.ID}}|zhuanjiaceluelist" clickremark=""><img src="{{StrategyInfo.StrategyImg}}" /></a>','<div class="hot-list ">','<a class="second-title" href="'+pagerouter.zhuanjiacelueList+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&ColumnID="+confColumnID+'&currpage=1&pageSize=3" clickkey="dakakanpan|title" clickdata="{{StrategyInfo.ID}}|zhuanjiaceluelist" clickremark="">{{StrategyInfo.StrategyName}}</a><span class="time">{{renderDateTime NewsInfo.CreateTime}}&nbsp;&nbsp;{{renderTime NewsInfo.CreateTime}}</span><div class="clearfloat"></div>','<a class="strategySummary" href="'+pagerouter.celueArticle+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&NewsID={{NewsInfo.ID}}&ColumnID="+confColumnID+'&source=ll&currpage=1&pageSize=6" clickkey="dakakanpan|summary" clickdata="{{StrategyInfo.ID}}|celueArticle" clickremark="">',"{{#if  NewsInfo.Summary}}","{{subStr NewsInfo.Summary 39}}","{{else}}","{{subStr NewsInfo.Title 39}}","{{/if}}","</a></div>","</li>","{{/each}}"].join(""),c=l("#hot-viewpoint-list");l.ajax({url:window.gConfig.apiHost+"strategy/GetStrategyNewsList_Top6",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode){for(var t=d.compile(s),a={Message:[]},i=0;i<e.Message.length;i++)i<6&&(a.Message[i]=e.Message[i]);var n='<a href="'+pagerouter.celueArticle+"?StrategyID={{StrategyInfo.ID}}&LiveID={{StrategyInfo.LiveID}}&NewsID={{NewsInfo.ID}}&ColumnID="+confColumnID+'&currpage=1&pageSize=3" class="more" id="estrategyMore" clickkey="dakakanpan|more" clickdata="list|zhuanjiaceluelist" clickremark="">更多<i class="icon-1">&#xe656;</i></a>',r=d.compile(n)(a.Message[0]);l(".hot-viewpoint .title").after(r);var o=t(a);c.find(".no-info").remove(),c.removeClass("no-info-cnt").append(o)}else c.addClass("no-info-cnt").html(m.nonedataHtml)},error:function(e,t,a){c.addClass("no-info-cnt").html(m.nonedataHtml)}})},liveApi:function(){var i=l("#live-list-wrap"),a=["{{#each Data}}",'<li class="item ">','<a class="pic-link " href="'+pagerouter.yqqUserLive+"?lid={{Id}}"+r.EMSSO()+'" target="_blank " clickkey="zhuanjiazhibo|logo" clickdata="{{Id}}|yqqLive" clickremark=""><img src="{{LiveImg}} " /></a>','<div class="content ">','<a class="title-link " href="'+pagerouter.yqqUserLive+"?lid={{Id}}"+r.EMSSO()+'" target="_blank " clickkey="zhuanjiazhibo|title" clickdata="{{Id}}|yqqLive" clickremark="">','<p class="second-title ">{{LiveName}}</p>',"</a>",'<a class="desc " href="'+pagerouter.yqqUserLive+"?lid={{Id}}"+r.EMSSO()+'" target="_blank " clickkey="zhuanjiazhibo|summary" clickdata="{{Id}}|yqqLive" clickremark="">{{LiveIntro}}</a>',"</div>","</li>","{{/each}}"].join("");l.ajax({url:window.gConfig.apiHost+"yqq/gethottop4room",contentType:"application/json",type:"GET",timeout:5e3,dataType:"JSON",success:function(e){if(0==e.RetCode){var t=d.compile(a)(e);i.find(".no-info").remove(),i.removeClass("no-info-cnt").append(t)}else i.find(".no-info").remove(),i.addClass("no-info-cnt").html(m.nonedataHtml)},error:function(e,t,a){i.find(".no-info").remove(),i.addClass("no-info-cnt").html(m.nonedataHtml)}})},toutiaoApi:function(){var i=l(".news-list"),a=["{{#each Message}}",'<a href="'+pagerouter.yaowenArticle+'?NewsID={{NewsInformationId}}&source=3&from=0" clickkey="jinritoutiao|title" clickdata="{{NewsInformationId}}|yaowen_article" clickremark="" class="{{secondcheck @index}} "><span class="time">{{renderTime PublishTime}}</span> {{ArticleTitle}}</a> {{/each}}'].join("");l.ajax({url:window.gConfig.apiHost+"expertnews/gettodaynews",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode&&e.Message&&e.Message.length){var t=d.compile(a)(e);i.find(".no-info").remove(),i.append(t)}else i.html(m.nonedataHtml)},error:function(e,t,a){i.html(m.nonedataHtml)}})},farcastApi:function(){var e=960<l(window).width()?"{{subStr ArticleSummary 56}}":"{{subStr ArticleSummary 48}}",i=["{{#each Message}}",'<div class="list ">','<a class="pic-link " href="'+pagerouter.yuceArticle+'?NewsID={{NewsInformationId}} " clickkey="panhouyuce|title"  clickdata="{{NewsInformationId}}|yuce_article"  clickremark="">{{NewsTags}}</a>','<a class="desc " href="'+pagerouter.yuceArticle+'?NewsID={{NewsInformationId}} " clickkey="panhouyuce|title" clickdata="{{NewsInformationId}}|yuce_article"  clickremark="">',e,"</a>","</a>",'<p class="time">{{renderDateTime PublishTime}}&nbsp;&nbsp;&nbsp;{{renderTime PublishTime}}</p>',"</div>","{{/each}}"].join("");this.handerbarsStr(),l.ajax({url:window.gConfig.apiHost+"expertnews/getclosingnewstop2",contentType:"application/json",type:"GET",timeout:ajaxTimeout,dataType:"JSON",success:function(e){if(0==e.RetCode&&e.Message&&e.Message.length){var t={Message:[]};t.Message=e.Message;var a=d.compile(i)(t);l("#forecast-list").find(".no-info").remove(),l("#forecast-list").removeClass("no-info-cnt").append(a)}else l("#forecast-list").append(m.nonedataHtml)},error:function(e,t,a){l("#forecast-list").append(m.nonedataHtml)}})},tab:function(){var e=l("#nav").find("a"),a=l("#contentBox").find(".box");e.on("click",function(){var e=l(this),t=e.index();e.addClass("active").siblings("a").removeClass("active"),a.addClass("closed").eq(t).removeClass("closed")})}};m.init(),l.emoneyAanalytics().Init(tjAppid.expert,"home","")});