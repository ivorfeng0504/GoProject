require(["jquery","utils"],function(n,t){({init:function(){var e=this;e.curPageOpts={},e.curPageOpts.NewsID=t.GetQueryString("NewsID")||265,e.curPageOpts.ColumnID=t.GetQueryString("ColumnID")||16,e.curPageOpts.StrategyID=t.GetQueryString("StrategyID")||2,e.curPageOpts.currpage=t.GetQueryString("currpage")||1,e.curPageOpts.pageSize=t.GetQueryString("pageSize")||20,e.type=t.GetQueryString("type")||2,e.source=t.GetQueryString("source")||5,e.NewsInfoId=t.GetQueryString("NewsID")||36758,e.topicId=t.GetQueryString("TopId")||2,1==e.type?e.showContent():e.showEstrageContent()},readingAll:function(){var e=n("#reading-all"),t=n("#acScrollbox");t.height()<240?e.addClass("close"):e.removeClass("close"),e.on("click",function(){n(this).addClass("close"),t.css("max-height","none")})},showContent:function(){var r=this,e={};e=4==r.source?{NewsType:r.source,NewsInfoId:r.NewsInfoId,TopicId:r.topicId}:{NewsType:r.source,NewsInfoId:r.NewsInfoId},r.updateInfo=function(t){if(n.support.cors=!0,1==r.source?n("#source").text("盘后预测"):2==r.source?n("#source").text("专家要闻"):3==r.source?n("#source").text("热门资讯"):4==r.source?n("#source").text("主题相关资讯"):5==r.source&&n("#source").text("专家要闻"),n("#artcleTitle").text(t.Message.CurrentNews.ArticleTitle),n("#articlePublishDate").text("最后更新时间："+t.Message.CurrentNews.PublishTime.replace("T"," ")),n.ajax({url:window.gConfig.apiHost+"click/queryclick",type:"GET",timeout:ajaxTimeout,dataType:"JSON",data:{identity:t.Message.CurrentNews.NewsInformationId,clickType:"news.information"},success:function(e){n("#reading").text("阅读量："+e.Message.Result[t.Message.CurrentNews.NewsInformationId])},error:function(e,t,s){}}),window.XDomainRequest){var s=new XDomainRequest;s.open("get",t.Message.CurrentNews.DataUrl),s.onprogress=function(){},s.ontimeout=function(){},s.onerror=function(){},s.onload=function(){var e=JSON.parse(s.responseText);n("#acScrollbox").html(e.content),r.readingAll()},setTimeout(function(){s.send()},0)}else n.ajax({url:t.Message.CurrentNews.DataUrl,type:"GET",timeout:ajaxTimeout,dataType:"json",success:function(e){n("#acScrollbox").html(e.content),r.readingAll()},error:function(e,t,s){}})},n.ajax({url:window.gConfig.apiHost+"expertnews/getnewsdetail",type:"GET",timeout:ajaxTimeout,dataType:"json",data:e,success:function(e){0==e.RetCode&&r.updateInfo(e)},error:function(e,t,s){}})},showEstrageContent:function(){var t=this;""!=t.curPageOpts.NewsID&&n.get(window.gConfig.apiHost+"strategy/GetNextStrategyNewsListByCurrNews",{NewsID:t.curPageOpts.NewsID,ColumnID:t.curPageOpts.ColumnID,StrategyID:t.curPageOpts.StrategyID,currpage:t.curPageOpts.currpage,pageSize:t.curPageOpts.pageSize},function(e){0==e.RetCode&&(n("#source").text("策略要闻"),document.title=e.Message[1].NewsInfo.Title+" - 专家策略",n("#artcleTitle").text(e.Message[1].NewsInfo.Title),e.Message[1].StrategyInfo&&(t.curPageOpts.LiveID=e.Message[1].StrategyInfo.LiveID,n.curPageOpts=t.curPageOpts),n("#articlePublishDate").text("最后更新时间："+e.Message[1].NewsInfo.CreateTime.replace("T"," ")),n("#reading").text("阅读量："+e.Message[1].NewsInfo.ClickNum),n("#acScrollbox").html(e.Message[1].NewsInfo.NewsContent),t.readingAll())})}}).init()});