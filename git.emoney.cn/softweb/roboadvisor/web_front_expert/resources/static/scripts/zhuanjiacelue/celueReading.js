define(["jquery","cors","layer","utils","handlebars","nicescroll"],function(d,t,c,i,g,e){c.config({path:window.gConfig.staticPath+"static/libs/layer/"}),{nonedataHtml:'<div class="no-info">暂无数据显示，请稍后重试</div>',init:function(){var l=this;i.EMSSO(),l.ClientStrategyID=i.GetQueryString("ClientStrategyID"),l.selectedStrategyID=l.ClientStrategyID,l.NewsID=i.GetQueryString("NewsID"),l.ClientStrategyGroupId=i.GetQueryString("ClientStrategyGroupId"),l.getFixedStrategyListData={},l.getFirstTypeStrategyListData={},l.stategyInfoIObj={},l.stategyArticleObj={},l.relationVideoObj={},l.otherLatestArticleList={},l.otherArticleObj={},l.classifyArticleObj={},l.pageNumber=1,l.isGroup=i.GetQueryString("isGroup"),l.flag=!0,l.loadALLStategy=!1,l.firstLoad=!0,l.getUID=d.cookie("expertnews.uid")||i.GetQueryString("uuid")||0,l.getAppId=appIDnewsinfo,l.format(),l.getAllMenuList(),l.LeftMenuPowerTree(),l.scrollContent(),l.hotStrategyArticleList(),l.otherStategyArticleList(),l.navList(),l.scrollFixedArticle(),l.moreVideo(),window.pulldownLoad=function(){var t,e=null,i=!0;d(function(){(e=d("#contentScroll").getNiceScroll(0)).jqbind("#contentScroll","scroll",function(){e.newscrolly>=e.page.maxh-50&&i&&(i=!i,clearTimeout(t),t=setTimeout(function(){l.flag?(c.tips("已加载全部","#contentScroll",{offset:["400px","50px"],tips:[2,"#cb4b4b"]}),l.flag=!1):l.flag,i=!i},500))}),e.scrollend(function(){var n,t=d("#contentScroll .atticle-show");d.each(t,function(t,e){var i=d(e),a=i.offset().top,s=i.height(),r=l.allarticleContentHeight-40;(a<=60&&s*(2/3)<a+s-40||60<a&&s*(2/3)<r-a-40)&&(n=i.attr("data-artid"),i.attr("data-view"))}),n!=undefined&&l.getNewsIDreadingCount(n)})})},window.pulldownLoad()},format:function(){g.registerHelper("renderTime",function(t){return t=t==undefined||null==t||0==t.length?"":"　"+t.slice(5,10),new g.SafeString(t)}),g.registerHelper("controlLines",function(t){return t==undefined||null==t||0==t.length?time="":10<=t.length&&t.length<=17?t=d.trim(t).substr(0,10)+"...":18<=t.length&&t.length<=22?t=t:22<t.length&&(t=d.trim(t).substr(0,22)+"..."),new g.SafeString(t)}),g.registerHelper("renderDate",function(t){return t=t==undefined||null==t||0==t.length?"":"　"+t.slice(5,10)+" "+t.slice(11,16),new g.SafeString(t)}),g.registerHelper("renderHTML",function(t){return t=t==undefined||null==t?"":t}),g.registerHelper("isSpreadThismenu",function(t){var e="";return e=0==t.length?"&#xe72e;":" ",new g.SafeString(e)})},firstMenuItemTrigger:function(){var t=this;i.GetQueryString("articleId")||i.GetQueryString("NewsID")||i.GetQueryString("ClientStrategyID")||i.GetQueryString("ClientStrategyGroupId")?i.GetQueryString("ClientStrategyGroupId")&&i.GetQueryString("ClientStrategyID")&&d("#navList [data-classid="+i.GetQueryString("ClientStrategyGroupId")+"]").trigger("click"):(t.currentClassify=d("#navList .first-menu-title").eq(0).attr("data-classid"),t.firstOrSecondStrageId=t.currentClassify,t.firstOrSecondStrageName=d("#navList .first-menu-title").eq(0).attr("data-className"),t.classify=!0,d("#navList .second-menu-title").eq(0).parents(".second-menu").show().siblings(".belong-to-first-menu").addClass("open"),d("#navList .first-menu-title").eq(0).children("i").hasClass("icon_right")&&d("#navList .first-menu-title").eq(0).trigger("click"),d("#navList .belong-to-first-menu").eq(0).find(".third-menu-item")||(t.clickArticleLoad=!1,t.ClientStrategyID=d("#navList .second-menu-title").eq(0).attr("data-clientstrategyid"),t.firstOrSecondStrageId=t.ClientStrategyID,t.firstOrSecondStrageName=d("#navList .second-menu-title").eq(0).attr("data-clientstrategyname"),d("#navList .second-menu-title").eq(0).trigger("click")))},moreVideo:function(){var e=this;d("#moreVideo").on("click",function(){d(this);var t=i.EMSSO().replace(/ClientStrategyID=/g,"r0v=");t="&"!=t[0]?"&"+t:t,window.location.href=pagerouter.celueVideo+"?ClientStrategyID="+e.ClientStrategyID+"&ClientStrategyGroupId"+e.ClientStrategyGroupId+t,window.event.returnValue=!1})},scrollContent:function(){var t=this;t.srcollBar=function(){t.allarticleContentHeight=d(window).height()-50,d(".list").css("height",d(window).height()-40),d(".midddle-content-box").css("height",d(window).height()-50),d.each([".list",".midddle-content-box"],function(t,e){0<d(e).length&&d(e).niceScroll({cursorcolor:"#666",cursoropacitymax:.5,touchbehavior:!1,cursorwidth:"6px",cursorborder:"0",cursorborderradius:"8px",autohidemode:!1})})},t.srcollBar(),d(window).on("resize",function(){t.srcollBar()})},getFirstTypeStrategyList:function(e,n,t){var l=this,o=["{{#each Message}}",' <div class="third-menu-item" data-id="{{ID}}" data-index="0" data-page=""><div class="third-menu-link"><span class="cont">{{Title}}</span></div></div>',"{{/each}}"].join(""),i=function(t){var a;d("#navList .third-menu-item").removeClass("current"),d("#navList .second-menu-title").removeClass("active");var e=g.compile(o)(t),i=n.siblings(".belong-to-first-menu");i.html(e),l.stategyInfoIArr=[];var s=i.find(".third-menu-item").length;if(i.find(".third-menu-item").each(function(t,e){var i=d(this);l.stategyInfoIArr.push(i.attr("data-id"))}),0<s&&l.firstLoad&&1==l.isGroup)i.find(".third-menu-item").each(function(t,e){var i=d(this);1==l.isGroup&&i.attr("data-id")==l.NewsID&&(i.addClass("current"),a=l.NewsID,l.articleListShow(l.stategyInfoIArr,a,"classify"))}),l.firstLoad=!1;else if(0<s&&!l.firstLoad){var r;(r=i.find(".third-menu-item")).eq(0).addClass("current"),a=r.eq(0).attr("data-id"),l.articleListShow(l.stategyInfoIArr,a,"classify")}else 0!=s||l.firstLoad||d("#navList [data-clientstrategyid="+l.firstClassifyStrategyID+"]").trigger("click");null==l.isGroup&&l.firstLoad&&((r=n.siblings(".belong-to-first-menu").find(".third-menu-item")).eq(0).addClass("current"),a=r.eq(0).attr("data-id"),l.firstLoad=!1,l.articleListShow(l.stategyInfoIArr,a,"classify"));0==l.isGroup&&l.firstLoad&&(l.firstLoad=!1,d("#navList [data-clientstrategyid="+l.ClientStrategyID+"]").trigger("click")),d("#contentScroll").getNiceScroll(0).doScrollTop(2,.01)};if(l.getFirstTypeStrategyListData[e]){var a=l.getFirstTypeStrategyListData[e];i(a)}else d.ajax({url:window.gConfig.apiHost+"strategyservice/getstrategygroupnewslist",type:"POST",timeout:5e3,dataType:"JSON",data:{StrategyGroupId:e,IsVideo:!1},success:function(t){0==t.RetCode&&t.Message&&0<t.Message.length?(l.getFirstTypeStrategyListData[e]=t,i(t)):(d("#navList .second-menu-title").removeClass("active"),0==l.isGroup&&l.firstLoad?(l.firstLoad=!1,d("#navList [data-clientstrategyid="+l.ClientStrategyID+"]").trigger("click")):1==l.isGroup&&l.firstLoad?(l.firstLoad=!1,d("#navList [data-clientstrategyid="+l.firstClassifyStrategyID+"]").trigger("click")):null==l.isGroup&&l.firstLoad?(l.firstLoad=!1,d("#navList [data-clientstrategyid="+l.firstClassifyStrategyID+"]").trigger("click")):l.firstLoad||d("#navList [data-clientstrategyid="+l.firstClassifyStrategyID+"]").trigger("click"))},error:function(t,e,i){c.msg("该分类的二级菜单暂无数据显示，请稍后重试")}})},getFixedStrategyList:function(i,s,r){var n=this,l=["{{#each Message}}",' <li class="third-menu-item" data-id="{{ID}}" data-index="0" data-page=""><div class="third-menu-link"><span class="cont">{{Title}}</span></div></li>',"{{/each}}"].join(""),e=function(t){if(0==t.RetCode&&t.Message&&0<t.Message.length){var a,e=g.compile(l)(t);s.siblings("ul").html(e),n.stategyInfoIObj[i]=[],s.siblings("ul").find("li").each(function(){var t=d(this);n.stategyInfoIObj[i].push(t.attr("data-id"))}),s.siblings("ul").find("li").each(function(t,e){var i=d(this);i.attr("data-id")==n.NewsID?(i.addClass("current"),a=r):0==t&&(d(e).addClass("current"),a=d(e).attr("data-id"))}),n.articleListShow(n.stategyInfoIObj[i],a,"strategy"),d("#contentScroll").getNiceScroll(0).doScrollTop(2,.01)}else d("#articleList").html('<div class="noContent">'+s.attr("data-clientstrategyname")+"暂无策略文章...</div>")};if(n.getFixedStrategyListData[i]){var t=n.getFixedStrategyListData[i];e(t)}else d.ajax({url:window.gConfig.apiHost+"strategyservice/getstrategynewslist",type:"POST",timeout:5e3,dataType:"JSON",data:{ClientStrategyId:i,IsVideo:!1},success:function(t){n.getFixedStrategyListData[i]=t,e(t)},error:function(t,e,i){c.msg("该分类的二级菜单暂无数据显示，请稍后重试"),d("#articleList").html('<div class="noContent">'+s.attr("data-clientstrategyname")+"暂无策略文章...</div>")}})},articleListShow:function(t,i,e,a){var s=this;s.getAppId="expertInfo"==a?appIDstrategyinfo:appIDnewsinfo,s.detailCode=["{{#each Message}}","<div class='atticle-show section yaowen-article' id=\"atticleShow{{ID}}\" data-artid={{ID}}>","        <div class='a-iner'>","            <div class='art-title'>",'                <h3 id="artcleTitle" title="">{{Title}}</h3>',"            </div>",'            <div class="art-subtitle">',"                <div class=' pull-right'>","                    <span class='view-tips'>",'                        <span class="vt-cell like" id="like{{ID}}" data-channelid={{ID}}>','                            <i class=\'icon-1\' id="likeicon{{ID}}">&#xe61b;</i><span class="liked" id="liked{{ID}}"></span></span>',"                </div>",'                <div class="pull-left ac-submain">','                    <span id="articleComefrom">来源：{{From}}</span>',"                    <span>{{renderDate LastModifyTime}}</span>","                </div>",'                <div class="clearfloat"></div>',"            </div>",'            <div class="art-cnt">','                <div class="ac-iner">','                    <div class="ac-content  ywac-content" data-fontsizecnt>',"                     {{{ NewsContent }}} ","                    </div>","                </div>","            </div>","        </div>","    </div>","{{/each}}"].join("");var r=function(t){if(0==t.RetCode&&t.Message&&0<t.Message.length){var e=g.compile(s.detailCode)(t);d("#articleList").html(e),i&&(s.currentArticleId=i,s.srcollArticle()),s.getLikes(),s.clickLike()}else d("#articleList").html('<div class="noContent">暂无内容...</div>')};if("hotNews"==e&&s.hotNewsDeatail){var n=s.hotNewsDeatail;r(n)}else if("otherNews"==e&&s.otherArticleObj[s.ClientStrategyID]){n=s.otherArticleObj[s.ClientStrategyID];r(n)}else if("strategy"==e&&s.stategyArticleObj[s.ClientStrategyID]){n=s.stategyArticleObj[s.ClientStrategyID];r(n)}else if("classify"==e&&s.classifyArticleObj[s.currentClassify]){n=s.classifyArticleObj[s.currentClassify];r(n)}else d.ajax({url:window.gConfig.apiHost+"strategyservice/getstrategynewsdetaillist",type:"POST",timeout:5e3,dataType:"JSON",data:{NewsInfoIdList:t.join(",")},success:function(t){"hotNews"==e&&(s.hotNewsDeatail=t),"strategy"==e&&(s.stategyArticleObj[s.ClientStrategyID]=t),"otherNews"==e&&(s.otherArticleObj[s.ClientStrategyID]=t),"classify"==e&&(s.classifyArticleObj[s.currentClassify]=t),r(t)},error:function(t,e,i){d("#articleList").html('<div class="noContent">暂无内容...</div>')}})},navList:function(){var s=this,t=d("#navList");t.on("click",".first-menu-title",function(){var t=d(this);d("#navList").find(".second-menu-title").removeClass("active");var e=d(this).attr("data-classid");s.firstOrSecondStrageName=d(this).attr("data-className"),s.firstOrSecondStrageId=e,null==s.ClientStrategyID&&(s.ClientStrategyID=t.siblings(".second-menu").find(".second-menu-title").eq(0).attr("data-clientstrategyid")),s.firstClassifyStrategyID=t.siblings(".second-menu").find(".second-menu-title").eq(0).attr("data-clientstrategyid"),s.currentClassify=e,s.ClientStrategyGroupId=e;var i=t.parents(".first-menu-item").siblings(".first-menu-item");if(t.children("i").hasClass("icon_right")?(i.find(".belong-to-first-menu").find(".third-menu-item").removeClass("current"),t.children("i").attr("class","icon_down icon-1").html("&#xe72e;"),t.siblings().show(),t.siblings(".second-menu").find(".second-menu-title").removeClass("active").siblings(".third-menu").hide(),s.getFirstTypeStrategyList(e,t,s.NewsID)):(t.children("i").attr("class","icon_right icon-1").html("&#xe604;"),t.siblings().hide()),s.loadALLStategy){var a=s.allStrategyListString.replace(s.currentClassify,"");s.otherStategyNewsList(a),s.relationVideoList(s.firstOrSecondStrageId,s.firstOrSecondStrageName,1)}}),t.on("click",".second-menu-title",function(){var t=d(this);if(d("#navList .second-menu-title").removeClass("active"),d("#navList .third-menu-item").removeClass("current"),t.addClass("active"),t.children("i").hasClass("icon_plus")?(t.parents(".second-menu").siblings(".belong-to-first-menu").find(".third-menu-item ").removeClass("current"),t.children("i").attr("class","icon_ruduce icon-1 active").html("&#xe626;"),t.siblings(".third-menu").show(),d("#hotNewsList li").removeClass("current"),d("#strategyNewsList li").removeClass("current")):(t.children("i").attr("class","icon_plus icon-1").html("&#xe639;"),t.siblings(".third-menu").hide()),s.clickArticleLoad||(s.ClientStrategyID=d(this).attr("data-clientstrategyid"),s.firstOrSecondStrageId=s.ClientStrategyID,s.getFixedStrategyList(s.ClientStrategyID,d(this),s.NewsID),s.relationVideoList(s.ClientStrategyID,d(this).attr("data-clientstrategyname"),0),s.flag=!0),s.loadALLStategy){var e=s.allStrategyListString.replace(s.ClientStrategyID,"");s.otherStategyNewsList(e)}}),d("#navList").on("click"," .belong-to-first-menu .third-menu-item",function(){d("#navList .third-menu-item").removeClass("current");var t=d(this);t.addClass("current").siblings(".third-menu-item").removeClass("current"),s.stategyInfoIArr=[],t.parents(".belong-to-first-menu").find(".third-menu-item").each(function(){var t=d(this);s.stategyInfoIArr.push(t.attr("data-id"))}),s.currentClassify=t.parents(".belong-to-first-menu").siblings(".first-menu-title").attr("data-classid"),s.articleListShow(s.stategyInfoIArr,t.attr("data-id"),"classify"),d("#hotNewsList li").removeClass("current"),d("#strategyNewsList li").removeClass("current"),d(".second-menu-title").removeClass("active"),s.clickArticleLoad=!1})},hotStrategyList:function(t){var i=["{{#each Message}}",'<li class="hotNewsItem" cid="{{NewsInfo.ID}}">','<a href="javascript:;">','<i class="icon-1">&#xe608;</i>',"<span>{{NewsInfo.Title}}</span>",'<div class="clearfloat"></div>',"</a>","</li>","{{/each}}"].join("");d.ajax({url:window.gConfig.apiHost+"strategy/GetStrategyNewsList_Rmgd",type:"GET",timeout:5e3,dataType:"JSON",data:{ColumnID:confColumnID,currpage:1,pageSize:10},success:function(t){if(0==t.RetCode&&t.Message&&0<t.Message.length){var e=g.compile(i)(t);d("#hotNewsList").html(e)}else d("#hotNewsList").html('<div class="noContent">暂无热门策略文章...</div>')},error:function(t,e,i){d("#hotNewsList").html('<div class="noContent">暂无热门策略文章...</div>')}})},hotStrategyArticleList:function(){var a=this;d("#hotNewsList").on("click",".hotNewsItem",function(){var t=d(this),e=t.attr("cid");t.addClass("current").siblings("li").removeClass("current"),d(".belong-to-first-menu").each(function(){var t=d(this);0<t.find(".third-menu-item").length&&t.find(".third-menu-item").removeClass("current")}),d("#navList .third-menu-item").removeClass("current"),d("#navList .second-menu-title").removeClass("active"),d("#strategyNewsList li").removeClass("current");var i=[];d(this).parents("#hotNewsList").find(".hotNewsItem").each(function(){var t=d(this);i.push(t.attr("cid"))}),a.articleListShow(i,e,"hotNews","expertInfo"),a.clickArticleLoad=!1})},relationVideoList:function(a,t,e){var i=this,s=["{{#each Message}}",'<li cid="{{ID}}" data-strategyId ="{{strategyid}}">','<a href="'+pagerouter.celueVideo+"?ClientStrategyID={{strategyid}}&articleId={{ID}}&ClientStrategyGroupId="+i.ClientStrategyGroupId+"&isGroup="+e+'">','<i class="icon-1">&#xe608;</i>',"<span>{{Title}}</span>",'<div class="clearfloat"></div>',"</a>","</li>","{{/each}}"].join(""),r=function(t){if(0==t.RetCode&&t.Message&&0<t.Message.length){for(var e=0;e<t.Message.length;e++)t.Message[e].strategyid=a;var i=g.compile(s)(t);d("#relationVideoList").attr("data-strategyId",a).html(i)}else d("#relationVideoList").html('<div class="noContent">暂无相关视频...</div>')};if(i.relationVideoObj[a]){var n=i.relationVideoObj[a];r(n)}else d.ajax({url:window.gConfig.apiHost+"strategyservice/getstrategyrelationnewstopn",type:"POST",timeout:5e3,dataType:"JSON",data:{ClientStrategyId:a,IsVideo:!0},success:function(t){i.relationVideoObj[a]=t,r(t)},error:function(t,e,i){d("#relationVideoList").html('<div class="noContent">暂无相关视频...</div>')}})},otherStategyNewsList:function(t){var e=this,a=["{{#each Message}}",'  <li class="strategy-news-item" data-articleId="{{ID}}"><span class="cont">{{Title}}</span><span class="time">{{renderTime LastModifyTime}}</span></li>',"{{/each}}"].join(""),i=function(t){var e={Message:t.Message.slice(0,3)};if(0==t.RetCode&&t.Message&&0<t.Message.length){var i=g.compile(a)(e);d("#strategyNewsList").html(i)}};if(e.otherLatestArticleList[e.firstOrSecondStrageId]){var s=e.otherLatestArticleList[e.firstOrSecondStrageId];i(s)}else d.ajax({url:window.gConfig.apiHost+"strategyservice/getnewststrategynews",type:"POST",timeout:5e3,dataType:"JSON",data:{ClientStrategyIdList:t},success:function(t){0==t.RetCode&&t.Message&&0<t.Message.length?(e.otherLatestArticleList[e.firstOrSecondStrageId]=t,i(t)):d("#strategyNewsList").html('<div class="noContent">暂无其它策略新闻...</div>')},error:function(t,e,i){d("#strategyNewsList").html('<div class="noContent">暂无其它策略新闻...</div>')}})},otherStategyArticleList:function(){var s=this;d("#strategyNewsList").on("click",".strategy-news-item",function(){var t=d(this),e=t.attr("data-articleId");t.addClass("current").siblings("li").removeClass("current"),d(".belong-to-first-menu").each(function(){var t=d(this);0<t.find(".third-menu-item").length&&t.find(".third-menu-item").removeClass("current")}),d("#navList .third-menu-item").removeClass("current"),d("#navList .second-menu-title").removeClass("active"),d("#hotNewsList li").removeClass("current");for(var i=[],a=0;a<s.otherLatestArticleList[s.firstOrSecondStrageId].Message.length;a++)i.push(s.otherLatestArticleList[s.firstOrSecondStrageId].Message[a].ID);e!=undefined&&(s.articleListShow(i,e,"otherNews"),s.clickArticleLoad=!1)})},LeftMenuPowerTree:function(){var e;function i(t,e){try{return function i(){return window.external.EmObj}().EmFunc(t,e)}catch(a){}}return function(){try{e=i("EM_FUNC_GET_STRATEGY_GROUP")}catch(t){e=""}e!=undefined&&(e=(e=(e=e.replace(/,+/gm,",")).replace(/\[,+/gm,"[")).replace(/,+\]/gm,"]")),""!=e&&e!=undefined||(d("#navList .no-info").html("获取权限列表失败..."),d("#articleList .no-info").html("暂无数据,请稍后再试..."),d("#strategyNewsList .no-info").html("暂无数据,请稍后再试..."),d("#hotNewsList .no-info").html("暂无数据,请稍后再试..."),d("#relationVideoList .no-info").html("暂无数据,请稍后再试..."))}(),e},getAllMenuList:function(){var a,s=this;d.ajax({type:"POST",url:window.gConfig.apiHost+"strategyservice/getclientstrategylist",data:{},dataType:"json",success:function(t){0==t.RetCode?a=t:d("#navList .no-info").html("获取策略总表失败...")},error:function(t){d("#navList .no-info").html("获取策略总表失败...")}}).then(function(t){var e,i=0;for(e=s.LeftMenuPowerTree();(""==e||e==undefined)&&i<10;)e=s.LeftMenuPowerTree(),i++;""==e||undefined,""!=e&&e!=undefined&&""!=a&&a!=undefined&&s.usrPowerMenu(e,a)})},usrPowerMenu:function(t,e){var r=this,i=JSON.parse(t),a=JSON.parse(JSON.stringify(e.Message)),n={},l={},s=[];if(r.classifyId=[],d.each(i,function(t,e){e.hasOwnProperty("70005")&&e.hasOwnProperty("70011")||d.extend(l,e)}),d.each(l,function(t,e){n[t]={ParentId:"",ParentName:"",strategyList:[]}}),d.each(a,function(t,e){var i=e.ParentId,a=e.ClientStrategyId+"",s=0;l[i]!=undefined&&(r.classifyId.push(e.ParentId),n[i].ParentId=e.ParentId,n[i].ParentName=e.ParentName,-1!=(s=l[i].indexOf(a))&&n[i].strategyList.push({ClientStrategyId:e.ClientStrategyId,ClientStrategyName:e.ClientStrategyName,positionidx:s}))}),r.classifyIdNnique=function o(t){for(var e=[t[0]],i=1;i<t.length;i++)-1==e.indexOf(t[i])&&e.push(t[i]);return e}(r.classifyId),r.allClassifyIdString=r.classifyIdNnique.join(","),d.each(n,function(t,e){var i=e.strategyList;n[t].strategyList=i.sort(function(t,e){return t.positionidx-e.positionidx}),s.push(e)}),r.powOBJ=l,r.usrPowerMenuDom(s),r.allUserStategyList=[],r.relationVideoList(r.firstOrSecondStrageId,r.firstOrSecondStrageName,r.isGroup),d.each(r.powOBJ,function(t,e){r.allUserStategyList.push(e.join(",")),r.allUserStategyListString=d.trim(r.allUserStategyList.join(","))}),r.allUserStategyListString=r.allUserStategyListString.replace(/\s/g,""),r.allStrategyListString=r.allUserStategyListString+","+r.allClassifyIdString,r.classify)var c=r.allStrategyListString.replace(r.currentClassify,"");else c=r.allStrategyListString.replace(r.ClientStrategyID,"");r.loadALLStategy=!0,r.hotStrategyList(r.allStrategyListString),r.otherStategyNewsList(c)},usrPowerMenuDom:function(t){var e=["{{#each this}}","{{#if ParentId}}",'<li class="first-menu-item">','    <div class="first-menu-title" data-classid="{{ ParentId }}" data-className="{{ ParentName }}">','<i class="icon_right icon-1">&#xe604;</i>'," {{ ParentName }} </div>",' <div class="belong-to-first-menu">'," </div>",'    <ul class="second-menu">',"        {{#each strategyList }}",'        <li class="second-menu-item">','            <div class="second-menu-title" data-ClientStrategyId="{{ ClientStrategyId }}" data-ClientStrategyName="{{ ClientStrategyName }}" ><i class="icon_plus icon-1">&#xe639;</i>{{ ClientStrategyName }}</div>','            <ul class="third-menu">',"            </ul>","        </li>","         {{/each}}","    </ul>","</li>","{{else}}{{/if}}","{{/each}}"].join(""),i=g.compile(e)(t);d("#navList").html(i),this.firstMenuItemTrigger()},srcollArticle:function(){var t,e,i=this,a=d("#contentScroll").getNiceScroll(0),s=d("#contentScroll .ac-content img").length;d("#contentScroll .ac-content img").load(function(){--s||(t=d("#articleList").offset().top,e=d("[data-artid='"+i.currentArticleId+"']").offset().top,a.doScrollTop(Math.abs(e-t)))}).error(function(){--s||(t=d("#articleList").offset().top,e=d("[data-artid='"+i.currentArticleId+"']").offset().top,a.doScrollTop(Math.abs(e-t)))}),t=d("#articleList").offset().top,e=d("[data-artid='"+i.currentArticleId+"']").offset().top,a.doScrollTop(Math.abs(e-t))},scrollFixedArticle:function(){var e=this;e.scrollHeight=0,d("#navList").on("click",".third-menu .third-menu-item",function(){var t=d(this);t.addClass("current").siblings(".third-menu-item").removeClass("current"),d("#navList .third-menu-item").removeClass("current"),d("#navList .second-menu-title").removeClass("active"),t.parent().siblings(".second-menu-title").addClass("active"),e.currentArticleId=t.attr("data-id"),e.ClickCelueIndex=t.attr("data-index"),e.ClickCeluePage=t.attr("data-page"),e.newsInfoIArr=[],t.parent().find("li").each(function(){var t=d(this);e.newsInfoIArr.push(t.attr("data-id"))}),e.ClientStrategyID=t.parents(".third-menu").siblings(".second-menu-title").attr("data-clientstrategyid"),e.articleListShow(e.newsInfoIArr,t.attr("data-id"),"strategy")})},clickLike:function(){var t=this,e=d("#articleList");d(".like",e).on("click",function(){var s=d(this),r=s.parents(".atticle-show").attr("data-artid");s.hasClass("liked")||d.ajax({type:"post",dataType:"json",url:window.gConfig.likeDataServer,data:{uid:t.getUID,newsId:r,appId:t.getAppId},success:function(t,e){if("success"===e)if(t.isSucess){if(s.attr("data-channelid")==r){s.addClass("liked");var i=d("#liked"+r).html();d("#liked"+r).html(Number(i)+1),d("#likeicon"+r).html("&#xe66b;")}}else d("#likeicon").html("&#xe61b;"),d("#like"+r).removeClass("liked");else{s.addClass("liked");i=d("#liked"+r).html();d("#liked"+r).html(Number(i)+1),d("#likeicon"+r).html("&#xe66b;")}},error:function(t,e,i){s.addClass("liked");var a=d("#liked"+r).html();d("#liked"+r).html(Number(a)+1),d("#likeicon"+r).html("&#xe66b;")}})})},getLikes:function(){var e=this,i=[],s=d("#articleList");d(".like",s).each(function(){var t=d(this).parents(".atticle-show").attr("data-artid");i.push({uid:e.getUID,newsId:t,appId:e.getAppId})}),d.ajax({type:"post",contentType:"text/plain",dataType:"json",url:window.gConfig.likeListDataServer,data:JSON.stringify(i),success:function(a,t){a.isSucess?d(".like",s).each(function(){for(var t=d(this),e=t.parents(".atticle-show").attr("data-artid"),i=0;i<a.message.length;i++)a.message[i].newsId==e&&(t.find("span").text(a.message[i].likes),!0===a.message[i].liked?(d("#likeicon"+e).html("&#xe66b;"),d("#like"+e).addClass("liked")):!1===a.message[i].liked&&(d("#likeicon"+e).html("&#xe61b;"),d("#like"+e).removeClass("liked")))}):d(".like",s).each(function(){d(this).text(0)})},error:function(t,e,i){d(".like",s).each(function(){d(this).text(0)})}})},getNewsIDreadingCount:function(t){var i;t!=undefined&&""!=t&&null!=t&&0!=t&&((i=d("#atticleShow"+t)).attr("data-view")||d.ajax({type:"get",url:window.gConfig.apiHost+"click/addclick",contentType:"text/plain",data:{identity:t,clickType:"news.strategyNewsInfo"},dataType:"json",success:function(t,e){0==t.RetCode&&"SUCCESS"==t.RetMsg&&i.attr("data-view",!0)},error:function(t,e,i){}}))}}.init()});