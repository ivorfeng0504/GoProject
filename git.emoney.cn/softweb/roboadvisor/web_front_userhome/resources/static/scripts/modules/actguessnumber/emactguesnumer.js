window.CoreLib=window.jQuery,function(m){"use strict";var e;m("#sidebar").on("click","li",function(){m(this).addClass("current").siblings().removeClass("current");var e=m("#"+m(this).data("scrlid")).offset().top;m("body,html").stop(!0,!1).animate({scrollTop:e},300)}),(e=function(){this.ticts={}}).prototype.createTicts=function(e,t,i){var s=this,a=moment(t,"YYYY-MM-DD HH:mm:ss").diff(moment()),n=null;function r(e,t){var i,s,a,n,r;i=e/1e3,s=Math.floor(i/86400),a=Math.floor((i-86400*s)/3600),n=Math.floor((i-86400*s-3600*a)/60),r=Math.floor(i-86400*s-3600*a-60*n),t.call(null,s,a,n,r)}r(a,i),n=this.ticts[e]={dealine:t,id:e,time:a,interval:setInterval(function(){r(n.time,i),n.time-=1e3,n.time<0&&s.deleteTicts(e)},1e3)}},e.prototype.deleteTicts=function(e){this.ticts[e]&&(clearInterval(this.ticts[e].interval),delete this.ticts[e])},window.Ticts=new e,m.guessNumCode=new function(){var n=m("#acUsrPart"),r=null;function c(e){return e=e.replace("T"," ")}function o(e){window.Ticts.deleteTicts("aaa");var c=m("#tDay"),o=m("#tHour"),l=m("#tMinutes");c.text("00"),o.text("00"),l.text("00"),""!==e&&Ticts.createTicts("aaa",e,function(e,t,i,s){var a=e<0?"00":("000"+e).slice(-2),n=t<0?"00":("000"+t).slice(-2),r=i<0?"00":("000"+i).slice(-2);s<0||("000"+s).slice(-2),(e<0||t<0||i<0||s<0)&&(r=n=a="00"),c.text(a),o.text(n),l.text(r)})}function l(e){var t,i=m("#acTimerTit");if(clearInterval(r),1==e.ActivityState)if(1==e.UserJoinState)o(c(e.Activity.EndTime)),i.html("本期开奖倒计时！"),m(".acup-state",n).hide(),m(".ac-timecounter",n).show(),m(".aces-btn-line",n).show(),(t=function(){m("#getLotteryCodeBtn",n).off().one("click",function(){m.ajax({url:GNACT_getCodeUrl,type:requestType,timeout:"",data:{},dataType:"json",success:function(e){0==e.RetCode?(l(e.Message),d()):(e.RetMsg,layer.msg(e.RetMsg,function(){t()}))},error:function(e){}})})})();else if(2==e.UserJoinState){o(c(e.Activity.EndTime)),i.html("本期开奖倒计时！");var s=[" <div>",'   <div class="aces-user-num">你的抽奖号码是：{{ Result }}</div>','   <div class="aces-user-inf">',"     <div>","       领取时间：{{ CreateTime }}","       <br/> 抽奖人：（昵称） {{ NickName }}","     </div>","   </div>"," </div>"].join("");Handlebars.registerHelper("icons",function(e,t){return icons[e]}),e.UserJoinRecord.CreateTime=c(e.UserJoinRecord.CreateTime);var a=Handlebars.compile(s)(e.UserJoinRecord);m(".aces-result",n).html(a),m(".acup-state",n).hide(),m(".ac-timecounter",n).show(),m(".aces-result",n).show()}2==e.ActivityState&&(1==e.UserJoinState?(m(".acup-state",n).hide(),m(".ac-takefail",n).show()):2==e.UserJoinState&&(c(e.Activity.EndTime),e.UserJoinRecord.CreateTime=c(e.UserJoinRecord.CreateTime),o(""),i.html("本期已结束，开奖中……！"),s=[" <div>",'   <div class="aces-user-num">你的抽奖号码是：{{ Result }}</div>','   <div class="aces-user-inf">',"     <div>","       领取时间：{{ CreateTime }}","       <br/> 抽奖人：（昵称） {{ NickName }}","     </div>","   </div>"," </div>"].join(""),a=Handlebars.compile(s)(e.UserJoinRecord),m(".aces-result",n).html(a),m(".acup-state",n).hide(),m(".ac-timecounter",n).show(),m(".aces-result",n).show(),r=setInterval(function(){u(),10<++r&&clearInterval(r)},6e4))),3==e.ActivityState&&(1==e.UserJoinState?(m(".acup-state",n).hide(),m(".ac-takefail",n).show()):3==e.UserJoinState?(o(c(e.Activity.EndTime)),i.html("本期已结束，开奖号码是: <b>"+e.Activity.Result+"</b>"),s=[" <div>",'   <div class="aces-user-num">你的抽奖号码是：{{ Result }}</div>','   <div class="aces-user-inf">',"     <div>","       领取时间：{{ CreateTime }}","       <br/> 抽奖人：（昵称） {{ NickName }}","     </div>","   </div>"," </div>"].join(""),Handlebars.registerHelper("icons",function(e,t){return icons[e]}),e.UserJoinRecord.CreateTime=c(e.UserJoinRecord.CreateTime),o(""),a=Handlebars.compile(s)(e.UserJoinRecord),m(".aces-result",n).html(a),m(".acup-state",n).hide(),m(".ac-timecounter",n).show(),m(".aces-result",n).show()):4==e.UserJoinState&&(c(e.Activity.EndTime),s=[" <div>",'   <div class="aces-user-num"> 恭喜您中奖了！</div>','   <div class="aces-user-inf">',"     <div>","       领取时间：{{ CreateTime }}","       <br/> 抽奖人：（昵称） {{ NickName }}","     </div>","   </div>"," </div>"].join(""),e.UserJoinRecord.CreateTime=c(e.UserJoinRecord.CreateTime),o(""),i.html("本期已结束，开奖号码是: <b>"+e.Activity.Result+"</b>"),a=Handlebars.compile(s)(e.UserJoinRecord),m(".aces-result",n).html(a),m(".acup-state",n).hide(),m(".ac-timecounter",n).show(),m(".aces-result",n).show()))}function e(){var e=m.ajax({url:GNACT_getAwardUrl,type:requestType,timeout:"",data:{},dataType:"json",success:function(e){}});e.done(function(e){0==e.RetCode&&m("#actAwardname").text(e.Message[0].AwardName)}),e.fail(function(e){m("#actAwardname").text(" 大奖在即 ")}),e.always(function(){})}function d(){var a=[" <div>","    <ul>","     {{#each MyGuessList}}","     <li>","      <i>{{renderTime CreateTime }}</i>","      <b>{{ Result }}</b>","     </li>","     {{/each}}","    </ul>","  </div>"].join(""),n=[" <div>","    <ul>","     {{#each HistoryLuckNumberList}}","     <li>","      <i>{{renderTime EndTime }}</i>","      <b>{{ Result }}</b>","     </li>","     {{/each}}","    </ul>","  </div>"].join(""),r=[" <div><ul>","     {{#each WinnerHistoryList}}","       <li><div class='iner'>","          <div> 抽奖得主： {{ NickName }}</div>","          <div> 中奖日期：{{renderTimeReplaceT PublishTime }}</div>","          <div> 奖品名称：{{ AwardName }}</div>","       </div></li>","     {{/each}}"," </ul></div>"].join(""),e=m.ajax({url:GNACT_historyListUrl,type:requestType,timeout:"",data:{},dataType:"json",success:function(e){}});e.done(function(e){if(0==e.RetCode){if(null!=e.Message.MyGuessList&&0<e.Message.MyGuessList.length){var t=Handlebars.compile(a)(e.Message);m("#MyGuessList").html(t)}if(null!=e.Message.HistoryLuckNumberList&&0<e.Message.HistoryLuckNumberList.length){var i=Handlebars.compile(n)(e.Message);m("#HistoryLuckNumberList").html(i)}if(null!=e.Message.WinnerHistoryList&&0<e.Message.WinnerHistoryList.length){var s=Handlebars.compile(r)(e.Message);m("#WinnerHistoryList").html(s)}}}),e.fail(function(e){}),e.always(function(e){})}function u(){var e=m.ajax({url:GNACT_getActStateUrl,type:requestType,timeout:"",data:{},dataType:"json",success:function(e){}});e.done(function(e){0==e.RetCode&&l(e.Message)}),e.fail(function(e){m("#actAwardname").text(" 大奖在即 ")}),e.always(function(){})}return Handlebars.registerHelper("renderTime",function(e){return e=e==undefined||null==e||0==e.length?"":e.substr(0,10),new Handlebars.SafeString(e)}),Handlebars.registerHelper("renderTimeReplaceT",function(e){return e=e==undefined||null==e||0==e.length?"":c(e),new Handlebars.SafeString(e)}),u(),d(),e(),{initPagestate:u,getWinerList:d,getAwardState:e,pageStateShow:l}}}(CoreLib,undefined);